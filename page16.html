<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrono Focus Pro - Premium Productivity Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&family=SF+Pro+Text:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        :root {
            /* Default Theme Variables */
            --primary-color: #0078d4;
            --secondary-color: #106ebe;
            --accent-color: #40e0d0;
            --background-primary: rgba(255, 255, 255, 0.1);
            --background-secondary: rgba(255, 255, 255, 0.05);
            --background-tertiary: rgba(0, 0, 0, 0.8);
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.5);
            --border-color: rgba(255, 255, 255, 0.15);
            --shadow-light: 0 8px 32px rgba(31, 38, 135, 0.37);
            --shadow-medium: 0 8px 32px rgba(0, 0, 0, 0.3);
            --blur: blur(20px);
            --gradient-primary: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            --gradient-secondary: linear-gradient(135deg, rgba(0, 120, 212, 0.3), rgba(16, 110, 190, 0.2));
        }

        /* Theme Definitions */
        .theme-black {
            --background-primary: rgba(30, 30, 30, 0.9);
            --background-secondary: rgba(20, 20, 20, 0.8);
            --background-tertiary: rgba(0, 0, 0, 0.95);
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --border-color: rgba(255, 255, 255, 0.1);
        }

        .theme-extrablack {
            --background-primary: rgba(0, 0, 0, 0.95);
            --background-secondary: rgba(10, 10, 10, 0.9);
            --background-tertiary: rgba(0, 0, 0, 1);
            --text-primary: rgba(255, 255, 255, 1);
            --text-secondary: rgba(255, 255, 255, 0.8);
            --border-color: rgba(255, 255, 255, 0.2);
        }

        .theme-sunset {
            --primary-color: #ff6b6b;
            --secondary-color: #ff8e53;
            --accent-color: #ffa726;
            --background-primary: rgba(255, 107, 107, 0.1);
            --background-secondary: rgba(255, 142, 83, 0.1);
            --background-tertiary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-primary: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(255, 142, 83, 0.1));
        }

        .theme-green {
            --primary-color: #4caf50;
            --secondary-color: #66bb6a;
            --accent-color: #81c784;
            --background-primary: rgba(76, 175, 80, 0.1);
            --background-secondary: rgba(102, 187, 106, 0.1);
            --background-tertiary: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --gradient-primary: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(102, 187, 106, 0.1));
        }

        .theme-purple {
            --primary-color: #9c27b0;
            --secondary-color: #ab47bc;
            --accent-color: #ba68c8;
            --background-primary: rgba(156, 39, 176, 0.1);
            --background-secondary: rgba(171, 71, 188, 0.1);
            --background-tertiary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-primary: linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(171, 71, 188, 0.1));
        }

        .theme-cotton-candy {
            --primary-color: #ff9a9e;
            --secondary-color: #fecfef;
            --accent-color: #fecfef;
            --background-primary: rgba(255, 154, 158, 0.1);
            --background-secondary: rgba(254, 207, 239, 0.1);
            --background-tertiary: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            --gradient-primary: linear-gradient(135deg, rgba(255, 154, 158, 0.2), rgba(254, 207, 239, 0.1));
        }

        .theme-cloud {
            --primary-color: #74b9ff;
            --secondary-color: #0984e3;
            --accent-color: #00cec9;
            --background-primary: rgba(116, 185, 255, 0.1);
            --background-secondary: rgba(9, 132, 227, 0.1);
            --background-tertiary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-primary: linear-gradient(135deg, rgba(116, 185, 255, 0.2), rgba(9, 132, 227, 0.1));
        }

        .theme-white {
            --primary-color: #2196f3;
            --secondary-color: #1976d2;
            --accent-color: #03dac6;
            --background-primary: rgba(255, 255, 255, 0.9);
            --background-secondary: rgba(250, 250, 250, 0.8);
            --background-tertiary: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --text-primary: rgba(33, 33, 33, 0.9);
            --text-secondary: rgba(97, 97, 97, 0.8);
            --text-muted: rgba(158, 158, 158, 0.7);
            --border-color: rgba(0, 0, 0, 0.1);
        }

        .theme-zenith1 {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --background-primary: rgba(108, 92, 231, 0.1);
            --background-secondary: rgba(162, 155, 254, 0.1);
            --background-tertiary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-primary: linear-gradient(135deg, rgba(108, 92, 231, 0.2), rgba(162, 155, 254, 0.1));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background-tertiary);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* Liquid Glass Components */
        .glass {
            background: var(--gradient-primary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .glass:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .glass-intense {
            background: var(--gradient-secondary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            box-shadow: var(--shadow-medium);
        }

        /* Login Screen */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--background-tertiary);
            z-index: 1000;
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .login-card {
            width: 400px;
            max-width: 90%;
            padding: 40px;
            text-align: center;
            animation: slideInUp 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .login-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: var(--gradient-secondary);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--text-primary);
        }

        .login-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .input-group {
            position: relative;
        }

        .login-input {
            width: 100%;
            padding: 15px 20px;
            background: var(--background-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .login-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.1);
        }

        .login-input::placeholder {
            color: var(--text-muted);
        }

        .profile-upload {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .profile-upload:hover {
            transform: scale(1.05);
        }

        .profile-upload input {
            display: none;
        }

        .profile-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-placeholder {
            font-size: 40px;
            color: var(--text-secondary);
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 120, 212, 0.3);
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 120, 212, 0.4);
        }

        /* Main App Container */
        .app-container {
            display: none;
            width: 100%;
            height: 100vh;
            flex-direction: row;
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            height: 100vh;
            padding: 20px;
            background: var(--background-primary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .user-profile {
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 16px;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--border-color);
        }

        .user-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .user-info p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .nav-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-item {
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
            color: var(--text-secondary);
        }

        .nav-item:hover,
        .nav-item.active {
            background: var(--gradient-secondary);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            height: 100vh;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .content-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .page-title {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            background: var(--gradient-primary);
            color: var(--text-primary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--border-color);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 4px 20px rgba(0, 120, 212, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 8px 30px rgba(0, 120, 212, 0.4);
        }

        /* Task Input */
        .task-input-container {
            margin-bottom: 30px;
        }

        .task-input {
            width: 100%;
            padding: 16px 20px;
            background: var(--background-primary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .task-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.1);
        }

        .task-input::placeholder {
            color: var(--text-muted);
        }

        /* Task List */
        .task-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .task-item {
            padding: 20px;
            border-radius: 16px;
            background: var(--gradient-primary);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            animation: slideInUp 0.3s ease;
        }

        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 6px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .task-checkbox.checked {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-color: var(--primary-color);
        }

        .task-checkbox.checked i {
            color: white;
            font-size: 12px;
        }

        .task-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .task-text {
            font-size: 16px;
            font-weight: 500;
        }

        .task-text.completed {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .task-meta {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .task-actions {
            display: flex;
            gap: 8px;
        }

        .task-action {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: var(--background-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .task-action:hover {
            background: var(--gradient-secondary);
            color: var(--text-primary);
            transform: scale(1.1);
        }

        /* Calendar View */
        .calendar-container {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--gradient-primary);
            border-radius: 16px;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .calendar-nav button {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: none;
            background: var(--background-secondary);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .calendar-nav button:hover {
            background: var(--gradient-secondary);
            transform: scale(1.1);
        }

        .calendar-title {
            font-size: 24px;
            font-weight: 600;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: var(--gradient-primary);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .calendar-day-header {
            padding: 15px;
            text-align: center;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-weight: 500;
        }

        .calendar-day:hover {
            background: var(--background-secondary);
        }

        .calendar-day.today {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .calendar-day.has-tasks {
            border: 2px solid var(--accent-color);
        }

        .calendar-day.other-month {
            color: var(--text-muted);
            opacity: 0.5;
        }

        /* AI Assistant */
        .ai-container {
            display: none;
            flex-direction: column;
            gap: 20px;
            height: 100%;
        }

        .ai-header {
            padding: 20px;
            background: var(--gradient-secondary);
            border-radius: 16px;
            text-align: center;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .ai-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .ai-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .ai-subtitle {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .ai-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--gradient-primary);
            border-radius: 16px;
            overflow: hidden;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .ai-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .ai-message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.4;
        }

        .ai-message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .ai-message.assistant {
            align-self: flex-start;
            background: var(--background-secondary);
            color: var(--text-primary);
        }

        .ai-input-container {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
        }

        .ai-input {
            flex: 1;
            padding: 12px 16px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background: var(--background-secondary);
            color: var(--text-primary);
            font-family: inherit;
        }

        .ai-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .ai-send {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .ai-send:hover {
            transform: scale(1.1);
        }

        /* Settings */
        .settings-container {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .settings-section {
            padding: 25px;
            background: var(--gradient-primary);
            border-radius: 16px;
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        .settings-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .theme-option {
            padding: 15px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            background: var(--background-secondary);
        }

        .theme-option:hover {
            transform: translateY(-2px);
            border-color: var(--primary-color);
        }

        .theme-option.active {
            border-color: var(--primary-color);
            background: var(--gradient-secondary);
        }

        .theme-preview {
            width: 100%;
            height: 40px;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .theme-name {
            font-size: 14px;
            font-weight: 500;
        }

        /* Focus Mode */
        .focus-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .focus-content {
            text-align: center;
            color: white;
        }

        .focus-timer {
            font-size: 72px;
            font-weight: 300;
            margin-bottom: 20px;
            font-variant-numeric: tabular-nums;
        }

        .focus-task {
            font-size: 24px;
            margin-bottom: 40px;
            opacity: 0.8;
        }

        .focus-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        /* Animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: fixed;
                bottom: 0;
                left: 0;
                flex-direction: row;
                padding: 10px;
                border-right: none;
                border-top: 1px solid var(--border-color);
                z-index: 100;
                transform: translateY(100%);
                transition: transform 0.3s ease;
            }

            .sidebar.active {
                transform: translateY(0);
            }

            .user-profile {
                display: none;
            }

            .nav-menu {
                flex-direction: row;
                flex: 1;
                justify-content: space-around;
            }

            .nav-item {
                flex-direction: column;
                padding: 8px;
                font-size: 12px;
                text-align: center;
                min-width: 60px;
            }

            .nav-item span {
                display: none;
            }

            .main-content {
                padding: 20px 15px 80px;
            }

            .app-container {
                flex-direction: column;
            }

            .mobile-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 15px;
                background: var(--gradient-primary);
                backdrop-filter: var(--blur);
                -webkit-backdrop-filter: var(--blur);
                border-bottom: 1px solid var(--border-color);
            }

            .mobile-menu-btn {
                width: 40px;
                height: 40px;
                border-radius: 10px;
                border: none;
                background: var(--background-secondary);
                color: var(--text-primary);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .page-title {
                font-size: 24px;
            }

            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between;
            }

            .login-card {
                width: 90%;
                padding: 30px 20px;
            }

            .focus-timer {
                font-size: 48px;
            }

            .focus-task {
                font-size: 18px;
            }

            .calendar-grid {
                padding: 15px;
            }

            .calendar-day {
                font-size: 14px;
            }

            .task-item {
                padding: 15px;
            }

            .ai-messages {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 15px 10px 80px;
            }

            .task-input {
                padding: 12px 15px;
                font-size: 16px;
            }

            .btn {
                padding: 8px 16px;
                font-size: 14px;
            }

            .theme-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 10px;
            }
        }

        /* Dark mode optimizations */
        @media (prefers-color-scheme: dark) {
            :root {
                --background-tertiary: rgba(0, 0, 0, 0.95);
            }
        }

        /* High contrast mode */
        @media (prefers-contrast: high) {
            .glass {
                border-width: 2px;
            }
            
            .task-checkbox {
                border-width: 3px;
            }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body class="theme-black">
    <!-- Login Screen -->
    <div id="loginContainer" class="login-container">
        <div class="login-card glass">
            <div class="login-logo">
                <i class="fas fa-clock"></i>
            </div>
            <h1 class="login-title">Chrono Focus Pro</h1>
            <p class="login-subtitle">Premium Productivity Suite</p>
            
            <form class="login-form" id="loginForm">
                <div class="profile-upload" onclick="document.getElementById('profileInput').click()">
                    <input type="file" id="profileInput" accept="image/*">
                    <img id="profilePreview" class="profile-preview" style="display: none;">
                    <i class="fas fa-camera profile-placeholder" id="profilePlaceholder"></i>
                </div>
                
                <div class="input-group">
                    <input type="text" class="login-input" placeholder="Full Name" id="nameInput" required>
                </div>
                
                <div class="input-group">
                    <input type="email" class="login-input" placeholder="Email Address" id="emailInput" required>
                </div>
                
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Sign In to Chrono Focus Pro
                </button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="appContainer" class="app-container">
        <!-- Mobile Header -->
        <div class="mobile-header" style="display: none;">
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
            <h2 id="mobilePageTitle">Tasks</h2>
            <button class="mobile-menu-btn" onclick="toggleFocusMode()">
                <i class="fas fa-crosshairs"></i>
            </button>
        </div>

        <!-- Sidebar -->
        <div id="sidebar" class="sidebar glass">
            <div class="user-profile">
                <img id="userAvatar" class="user-avatar" src="" alt="Profile">
                <div class="user-info">
                    <h3 id="userName">User Name</h3>
                    <p id="userEmail">user@email.com</p>
                </div>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item active" onclick="showSection('tasks')">
                    <i class="fas fa-tasks"></i>
                    <span>My Day</span>
                </div>
                <div class="nav-item" onclick="showSection('important')">
                    <i class="fas fa-star"></i>
                    <span>Important</span>
                </div>
                <div class="nav-item" onclick="showSection('planned')">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Planned</span>
                </div>
                <div class="nav-item" onclick="showSection('calendar')">
                    <i class="fas fa-calendar"></i>
                    <span>Calendar</span>
                </div>
                <div class="nav-item" onclick="showSection('ai')">
                    <i class="fas fa-robot"></i>
                    <span>OptiChain AI Pro</span>
                </div>
                <div class="nav-item" onclick="showSection('analytics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </div>
                <div class="nav-item" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Tasks Section -->
            <div id="tasksSection" class="content-section">
                <div class="content-header">
                    <h1 class="page-title">My Day</h1>
                    <div class="header-actions">
                        <button class="btn" onclick="toggleFocusMode()">
                            <i class="fas fa-crosshairs"></i>
                            Focus Mode
                        </button>
                        <button class="btn" onclick="sortTasks()">
                            <i class="fas fa-sort"></i>
                            Sort
                        </button>
                        <button class="btn" onclick="filterTasks()">
                            <i class="fas fa-filter"></i>
                            Filter
                        </button>
                    </div>
                </div>
                
                <div class="task-input-container">
                    <input type="text" class="task-input" id="taskInput" placeholder="Add a task... (Use emojis! 🎯📝✨)" onkeypress="handleTaskInput(event)">
                </div>
                
                <div class="task-list" id="taskList">
                    <!-- Tasks will be dynamically added here -->
                </div>
            </div>

            <!-- Important Section -->
            <div id="importantSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1 class="page-title">Important</h1>
                    <div class="header-actions">
                        <button class="btn" onclick="markAllImportant()">
                            <i class="fas fa-star"></i>
                            Mark All
                        </button>
                    </div>
                </div>
                
                <div class="task-list" id="importantTaskList">
                    <!-- Important tasks will be shown here -->
                </div>
            </div>

            <!-- Planned Section -->
            <div id="plannedSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1 class="page-title">Planned</h1>
                    <div class="header-actions">
                        <button class="btn" onclick="showCalendarPicker()">
                            <i class="fas fa-calendar-plus"></i>
                            Schedule
                        </button>
                    </div>
                </div>
                
                <div class="task-list" id="plannedTaskList">
                    <!-- Planned tasks will be shown here -->
                </div>
            </div>

            <!-- Calendar Section -->
            <div id="calendarSection" class="calendar-container">
                <div class="calendar-header">
                    <div class="calendar-nav">
                        <button onclick="previousMonth()">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 class="calendar-title" id="calendarTitle">November 2024</h2>
                        <button onclick="nextMonth()">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <button class="btn btn-primary" onclick="goToToday()">
                        <i class="fas fa-calendar-day"></i>
                        Today
                    </button>
                </div>
                
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Calendar will be dynamically generated -->
                </div>
            </div>

            <!-- AI Assistant Section -->
            <div id="aiSection" class="ai-container">
                <div class="ai-header">
                    <div class="ai-avatar">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h2 class="ai-title">OptiChain AI Pro</h2>
                    <p class="ai-subtitle">Your intelligent productivity assistant</p>
                </div>
                
                <div class="ai-chat">
                    <div class="ai-messages" id="aiMessages">
                        <div class="ai-message assistant">
                            Hello! I'm OptiChain AI Pro, your personal productivity assistant. I can help you find tasks, check holidays, provide productivity tips, and much more. How can I assist you today? 🤖
                        </div>
                    </div>
                    
                    <div class="ai-input-container">
                        <input type="text" class="ai-input" id="aiInput" placeholder="Ask me anything... (e.g., 'Is September 23 a holiday?')" onkeypress="handleAIInput(event)">
                        <button class="ai-send" onclick="sendAIMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analyticsSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1 class="page-title">Analytics</h1>
                    <div class="header-actions">
                        <button class="btn" onclick="exportAnalytics()">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="glass" style="padding: 20px;">
                        <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-chart-line"></i>
                            Productivity Overview
                        </h3>
                        <div id="productivityChart" style="height: 200px;"></div>
                    </div>
                    
                    <div class="glass" style="padding: 20px;">
                        <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-clock"></i>
                            Time Tracking
                        </h3>
                        <div id="timeStats">
                            <div style="margin-bottom: 10px;">
                                <strong>Today:</strong> <span id="todayTime">0h 0m</span>
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>This Week:</strong> <span id="weekTime">0h 0m</span>
                            </div>
                            <div>
                                <strong>This Month:</strong> <span id="monthTime">0h 0m</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settingsSection" class="settings-container">
                <div class="settings-section">
                    <h3 class="settings-title">
                        <i class="fas fa-palette"></i>
                        Theme Selection
                    </h3>
                    <div class="theme-grid" id="themeGrid">
                        <!-- Themes will be dynamically generated -->
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="settings-title">
                        <i class="fas fa-bell"></i>
                        Notifications
                    </h3>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="taskReminders" checked>
                            <span>Task reminders</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="dailySummary" checked>
                            <span>Daily summary</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="focusModeAlerts">
                            <span>Focus mode alerts</span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="settings-title">
                        <i class="fas fa-user-cog"></i>
                        Account
                    </h3>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <button class="btn" onclick="exportData()">
                            <i class="fas fa-download"></i>
                            Export Data
                        </button>
                        <button class="btn" onclick="importData()">
                            <i class="fas fa-upload"></i>
                            Import Data
                        </button>
                        <button class="btn" onclick="clearAllData()" style="background: linear-gradient(135deg, #ff4757, #ff3838);">
                            <i class="fas fa-trash"></i>
                            Clear All Data
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Focus Mode Overlay -->
    <div id="focusMode" class="focus-mode">
        <div class="focus-content">
            <div class="focus-timer" id="focusTimer">25:00</div>
            <div class="focus-task" id="focusTaskName">Focus Session</div>
            <div class="focus-controls">
                <button class="btn" onclick="startFocusTimer()" id="focusStartBtn">
                    <i class="fas fa-play"></i>
                    Start
                </button>
                <button class="btn" onclick="pauseFocusTimer()" id="focusPauseBtn" style="display: none;">
                    <i class="fas fa-pause"></i>
                    Pause
                </button>
                <button class="btn" onclick="stopFocusTimer()">
                    <i class="fas fa-stop"></i>
                    Stop
                </button>
                <button class="btn" onclick="closeFocusMode()">
                    <i class="fas fa-times"></i>
                    Exit
                </button>
            </div>
        </div>
    </div>

    <script>
        // App State
        let currentUser = null;
        let tasks = JSON.parse(localStorage.getItem('chronoFocusTasks')) || [];
        let currentDate = new Date();
        let currentTheme = localStorage.getItem('chronoFocusTheme') || 'theme-black';
        let focusTimer = null;
        let focusTimeRemaining = 25 * 60; // 25 minutes in seconds
        let focusIsRunning = false;

        // Theme definitions
        const themes = {
            'theme-black': { name: 'Black', preview: 'linear-gradient(135deg, #1e1e1e, #000)' },
            'theme-extrablack': { name: 'Extra Black', preview: 'linear-gradient(135deg, #000, #0a0a0a)' },
            'theme-sunset': { name: 'Sunset', preview: 'linear-gradient(135deg, #ff6b6b, #ff8e53)' },
            'theme-green': { name: 'Green', preview: 'linear-gradient(135deg, #4caf50, #66bb6a)' },
            'theme-purple': { name: 'Purple', preview: 'linear-gradient(135deg, #9c27b0, #ab47bc)' },
            'theme-cotton-candy': { name: 'Cotton Candy', preview: 'linear-gradient(135deg, #ff9a9e, #fecfef)' },
            'theme-cloud': { name: 'Cloud', preview: 'linear-gradient(135deg, #74b9ff, #0984e3)' },
            'theme-white': { name: 'White', preview: 'linear-gradient(135deg, #f5f7fa, #c3cfe2)' },
            'theme-zenith1': { name: 'Zenith 1', preview: 'linear-gradient(135deg, #6c5ce7, #a29bfe)' }
        };

        // Holidays data (simplified for demo)
        const holidays = {
            '2024-09-23': 'Autumnal Equinox',
            '2024-12-25': 'Christmas Day',
            '2024-01-01': 'New Year\'s Day',
            '2024-07-04': 'Independence Day',
            '2024-11-28': 'Thanksgiving',
            '2024-10-31': 'Halloween'
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            // Apply saved theme
            document.body.className = currentTheme;
            
            // Check if user is logged in
            const savedUser = localStorage.getItem('chronoFocusUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showApp();
            }
            
            // Initialize components
            initializeThemeGrid();
            initializeCalendar();
            updateAnalytics();
            
            // Setup responsive design
            setupResponsiveDesign();
        });

        // Login System
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('nameInput').value;
            const email = document.getElementById('emailInput').value;
            const profileInput = document.getElementById('profileInput');
            
            let profileImage = '/api/placeholder/100/100'; // Default avatar
            
            if (profileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    profileImage = e.target.result;
                    completeLogin(name, email, profileImage);
                };
                reader.readAsDataURL(profileInput.files[0]);
            } else {
                completeLogin(name, email, profileImage);
            }
        });

        document.getElementById('profileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profilePreview').src = e.target.result;
                    document.getElementById('profilePreview').style.display = 'block';
                    document.getElementById('profilePlaceholder').style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        function completeLogin(name, email, profileImage) {
            currentUser = { name, email, profileImage };
            localStorage.setItem('chronoFocusUser', JSON.stringify(currentUser));
            showApp();
        }

        function showApp() {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('appContainer').style.display = 'flex';
            
            // Update user info
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userEmail').textContent = currentUser.email;
            document.getElementById('userAvatar').src = currentUser.profileImage;
            
            // Load tasks
            renderTasks();
        }

        // Task Management
        function handleTaskInput(event) {
            if (event.key === 'Enter' && event.target.value.trim()) {
                addTask(event.target.value.trim());
                event.target.value = '';
            }
        }

        function addTask(text) {
            const task = {
                id: Date.now().toString(),
                text: text,
                completed: false,
                important: false,
                createdAt: new Date().toISOString(),
                dueDate: null,
                notes: '',
                tags: []
            };
            
            tasks.unshift(task);
            saveTasks();
            renderTasks();
            updateAnalytics();
            
            // Animation
            const taskElement = document.querySelector(`[data-task-id="${task.id}"]`);
            if (taskElement) {
                taskElement.style.animation = 'slideInUp 0.3s ease';
            }
        }

        function toggleTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                saveTasks();
                renderTasks();
                updateAnalytics();
            }
        }

        function toggleImportant(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                task.important = !task.important;
                saveTasks();
                renderTasks();
            }
        }

        function deleteTask(taskId) {
            tasks = tasks.filter(t => t.id !== taskId);
            saveTasks();
            renderTasks();
            updateAnalytics();
        }

        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                const newText = prompt('Edit task:', task.text);
                if (newText && newText.trim()) {
                    task.text = newText.trim();
                    saveTasks();
                    renderTasks();
                }
            }
        }

        function renderTasks() {
            const taskList = document.getElementById('taskList');
            const importantList = document.getElementById('importantTaskList');
            const plannedList = document.getElementById('plannedTaskList');
            
            // Clear lists
            taskList.innerHTML = '';
            importantList.innerHTML = '';
            plannedList.innerHTML = '';
            
            // Today's tasks
            const todayTasks = tasks.filter(task => {
                const today = new Date().toDateString();
                const taskDate = new Date(task.createdAt).toDateString();
                return taskDate === today || !task.completed;
            });
            
            // Important tasks
            const importantTasks = tasks.filter(task => task.important);
            
            // Planned tasks
            const plannedTasks = tasks.filter(task => task.dueDate);
            
            // Render today's tasks
            todayTasks.forEach(task => {
                taskList.appendChild(createTaskElement(task));
            });
            
            // Render important tasks
            importantTasks.forEach(task => {
                importantList.appendChild(createTaskElement(task));
            });
            
            // Render planned tasks
            plannedTasks.forEach(task => {
                plannedList.appendChild(createTaskElement(task));
            });
            
            // Show empty states if needed
            if (todayTasks.length === 0) {
                taskList.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 40px;">No tasks for today. Add one above! ✨</div>';
            }
            
            if (importantTasks.length === 0) {
                importantList.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 40px;">No important tasks yet. Star some tasks to see them here! ⭐</div>';
            }
            
            if (plannedTasks.length === 0) {
                plannedList.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 40px;">No planned tasks. Schedule some tasks to see them here! 📅</div>';
            }
        }

        function createTaskElement(task) {
            const taskElement = document.createElement('div');
            taskElement.className = 'task-item glass';
            taskElement.setAttribute('data-task-id', task.id);
            
            const dueText = task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '';
            
            taskElement.innerHTML = `
                <div class="task-checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask('${task.id}')">
                    ${task.completed ? '<i class="fas fa-check"></i>' : ''}
                </div>
                <div class="task-content">
                    <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
                    ${dueText ? `<div class="task-meta">Due: ${dueText}</div>` : ''}
                </div>
                <div class="task-actions">
                    <button class="task-action" onclick="toggleImportant('${task.id}')" title="Mark Important">
                        <i class="fas fa-star ${task.important ? 'important' : ''}"></i>
                    </button>
                    <button class="task-action" onclick="editTask('${task.id}')" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="task-action" onclick="deleteTask('${task.id}')" title="Delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            return taskElement;
        }

        function saveTasks() {
            localStorage.setItem('chronoFocusTasks', JSON.stringify(tasks));
        }

        // Navigation
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section, .calendar-container, .ai-container, .settings-container');
            sections.forEach(section => section.style.display = 'none');
            
            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.style.display = sectionName === 'calendar' ? 'flex' : 'block';
            }
            
            // Add active class to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
            
            // Update mobile page title
            const titles = {
                'tasks': 'My Day',
                'important': 'Important',
                'planned': 'Planned',
                'calendar': 'Calendar',
                'ai': 'OptiChain AI Pro',
                'analytics': 'Analytics',
                'settings': 'Settings'
            };
            
            const mobileTitle = document.getElementById('mobilePageTitle');
            if (mobileTitle) {
                mobileTitle.textContent = titles[sectionName] || 'Chrono Focus Pro';
            }
            
            // Special handling for calendar
            if (sectionName === 'calendar') {
                renderCalendar();
            }
        }

        // Calendar
        function initializeCalendar() {
            renderCalendar();
        }

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const title = document.getElementById('calendarTitle');
            
            if (!grid || !title) return;
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            title.textContent = new Date(year, month).toLocaleDateString('en-US', {
                month: 'long',
                year: 'numeric'
            });
            
            grid.innerHTML = '';
            
            // Day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day-header';
                dayElement.textContent = day;
                grid.appendChild(dayElement);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            // Previous month's trailing days
            for (let i = firstDay - 1; i >= 0; i--) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.textContent = daysInPrevMonth - i;
                grid.appendChild(dayElement);
            }
            
            // Current month's days
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                // Check if it's today
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                // Check if there are tasks on this day
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const hasTasks = tasks.some(task => task.dueDate === dateString);
                if (hasTasks) {
                    dayElement.classList.add('has-tasks');
                }
                
                dayElement.addEventListener('click', () => selectCalendarDay(year, month, day));
                grid.appendChild(dayElement);
            }
            
            // Next month's leading days
            const totalCells = grid.children.length;
            const remainingCells = 42 - totalCells; // 6 rows × 7 days
            for (let day = 1; day <= remainingCells; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.textContent = day;
                grid.appendChild(dayElement);
            }
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function goToToday() {
            currentDate = new Date();
            renderCalendar();
        }

        function selectCalendarDay(year, month, day) {
            const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const taskText = prompt('Add a task for ' + new Date(year, month, day).toLocaleDateString() + ':');
            
            if (taskText && taskText.trim()) {
                const task = {
                    id: Date.now().toString(),
                    text: taskText.trim(),
                    completed: false,
                    important: false,
                    createdAt: new Date().toISOString(),
                    dueDate: dateString,
                    notes: '',
                    tags: []
                };
                
                tasks.unshift(task);
                saveTasks();
                renderTasks();
                renderCalendar();
                updateAnalytics();
            }
        }

        // AI Assistant
        function handleAIInput(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addAIMessage(message, 'user');
            input.value = '';
            
            // Simulate AI processing
            setTimeout(() => {
                const response = generateAIResponse(message);
                addAIMessage(response, 'assistant');
            }, 500);
        }

        function addAIMessage(message, sender) {
            const messages = document.getElementById('aiMessages');
            const messageElement = document.createElement('div');
            messageElement.className = `ai-message ${sender}`;
            messageElement.textContent = message;
            
            messages.appendChild(messageElement);
            messages.scrollTop = messages.scrollHeight;
        }

        function generateAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Holiday detection
            const holidayRegex = /(\d{1,2})[\/\-](\d{1,2})(?:[\/\-](\d{4}))?|(\w+ \d{1,2})/i;
            if (lowerMessage.includes('holiday') || lowerMessage.includes('vacation')) {
                const match = message.match(holidayRegex);
                if (match) {
                    // Simple holiday check (this would be more sophisticated in a real app)
                    const dateStr = match[0];
                    for (const [date, holiday] of Object.entries(holidays)) {
                        if (dateStr.includes('23') && dateStr.includes('september')) {
                            return `September 23rd is the Autumnal Equinox! 🍂 It's the first day of fall when day and night are approximately equal in length.`;
                        }
                    }
                    return `I don't have specific holiday information for ${dateStr}, but you can check your local calendar for regional holidays! 📅`;
                }
                return "I can help you check holidays! Try asking about a specific date like 'Is September 23 a holiday?' 🎉";
            }
            
            // Task search
            if (lowerMessage.includes('find') || lowerMessage.includes('search')) {
                const searchTerm = message.replace(/find|search|task|tasks/gi, '').trim();
                const matchingTasks = tasks.filter(task => 
                    task.text.toLowerCase().includes(searchTerm.toLowerCase())
                );
                
                if (matchingTasks.length > 0) {
                    const taskList = matchingTasks.map(task => `• ${task.text}`).join('\n');
                    return `I found ${matchingTasks.length} task(s) matching "${searchTerm}":\n\n${taskList}`;
                }
                return `I couldn't find any tasks matching "${searchTerm}". Try a different search term! 🔍`;
            }
            
            // Productivity tips
            if (lowerMessage.includes('tip') || lowerMessage.includes('productive') || lowerMessage.includes('focus')) {
                const tips = [
                    "Try the Pomodoro Technique: Work for 25 minutes, then take a 5-minute break! 🍅",
                    "Break large tasks into smaller, manageable chunks. It's less overwhelming! 📝",
                    "Use the 2-minute rule: If something takes less than 2 minutes, do it now! ⏰",
                    "Prioritize your tasks using the Eisenhower Matrix: Urgent vs Important! 📊",
                    "Take regular breaks to maintain focus and avoid burnout! 😌",
                    "Use time-blocking to dedicate specific hours to specific tasks! 📅",
                    "Eliminate distractions by putting your phone in another room! 📱"
                ];
                return tips[Math.floor(Math.random() * tips.length)];
            }
            
            // Analytics
            if (lowerMessage.includes('stat') || lowerMessage.includes('progress') || lowerMessage.includes('analytics')) {
                const completed = tasks.filter(t => t.completed).length;
                const total = tasks.length;
                const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
                
                return `Here's your productivity summary:\n• Total tasks: ${total}\n• Completed: ${completed}\n• Completion rate: ${percentage}%\n\nKeep up the great work! 💪`;
            }
            
            // General responses
            const responses = [
                "I'm here to help you stay productive! Ask me about your tasks, holidays, or productivity tips! 🚀",
                "That's an interesting question! I can help you with task management, calendar queries, and productivity advice. What would you like to know? 🤖",
                "I'm OptiChain AI Pro, your productivity companion! I can search your tasks, check holidays, and provide helpful tips. How can I assist? ⚡",
                "Great question! I specialize in productivity and task management. Try asking me to find specific tasks or check if a date is a holiday! 🎯"
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Focus Mode
        function toggleFocusMode() {
            const focusMode = document.getElementById('focusMode');
            const isVisible = focusMode.style.display === 'flex';
            
            if (isVisible) {
                closeFocusMode();
            } else {
                // Select current task for focus
                const incompleteTasks = tasks.filter(t => !t.completed);
                if (incompleteTasks.length > 0) {
                    document.getElementById('focusTaskName').textContent = incompleteTasks[0].text;
                } else {
                    document.getElementById('focusTaskName').textContent = 'Focus Session';
                }
                
                focusMode.style.display = 'flex';
                resetFocusTimer();
            }
        }

        function closeFocusMode() {
            document.getElementById('focusMode').style.display = 'none';
            if (focusTimer) {
                clearInterval(focusTimer);
                focusTimer = null;
            }
            focusIsRunning = false;
            updateFocusButtons();
        }

        function startFocusTimer() {
            focusIsRunning = true;
            updateFocusButtons();
            
            focusTimer = setInterval(() => {
                focusTimeRemaining--;
                updateFocusDisplay();
                
                if (focusTimeRemaining <= 0) {
                    clearInterval(focusTimer);
                    focusIsRunning = false;
                    updateFocusButtons();
                    alert('Focus session complete! Great job! 🎉');
                    resetFocusTimer();
                }
            }, 1000);
        }

        function pauseFocusTimer() {
            if (focusTimer) {
                clearInterval(focusTimer);
                focusTimer = null;
            }
            focusIsRunning = false;
            updateFocusButtons();
        }

        function stopFocusTimer() {
            if (focusTimer) {
                clearInterval(focusTimer);
                focusTimer = null;
            }
            focusIsRunning = false;
            resetFocusTimer();
            updateFocusButtons();
        }

        function resetFocusTimer() {
            focusTimeRemaining = 25 * 60; // Reset to 25 minutes
            updateFocusDisplay();
        }

        function updateFocusDisplay() {
            const minutes = Math.floor(focusTimeRemaining / 60);
            const seconds = focusTimeRemaining % 60;
            document.getElementById('focusTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateFocusButtons() {
            const startBtn = document.getElementById('focusStartBtn');
            const pauseBtn = document.getElementById('focusPauseBtn');
            
            if (focusIsRunning) {
                startBtn.style.display = 'none';
                pauseBtn.style.display = 'flex';
            } else {
                startBtn.style.display = 'flex';
                pauseBtn.style.display = 'none';
            }
        }

        // Theme System
        function initializeThemeGrid() {
            const themeGrid = document.getElementById('themeGrid');
            
            Object.entries(themes).forEach(([themeClass, themeData]) => {
                const themeOption = document.createElement('div');
                themeOption.className = `theme-option ${themeClass === currentTheme ? 'active' : ''}`;
                themeOption.onclick = () => changeTheme(themeClass);
                
                themeOption.innerHTML = `
                    <div class="theme-preview" style="background: ${themeData.preview};"></div>
                    <div class="theme-name">${themeData.name}</div>
                `;
                
                themeGrid.appendChild(themeOption);
            });
        }

        function changeTheme(newTheme) {
            // Update body class
            document.body.className = newTheme;
            currentTheme = newTheme;
            
            // Save to localStorage
            localStorage.setItem('chronoFocusTheme', newTheme);
            
            // Update theme grid
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`.theme-option[onclick*="${newTheme}"]`).classList.add('active');
        }

        // Analytics
        function updateAnalytics() {
            // Simple analytics for demo
            const total = tasks.length;
            const completed = tasks.filter(t => t.completed).length;
            const todayTasks = tasks.filter(task => {
                const today = new Date().toDateString();
                const taskDate = new Date(task.createdAt).toDateString();
                return taskDate === today;
            });
            
            // Update time stats (mock data for demo)
            document.getElementById('todayTime').textContent = `${todayTasks.length}h 30m`;
            document.getElementById('weekTime').textContent = `${Math.min(total * 2, 40)}h 15m`;
            document.getElementById('monthTime').textContent = `${Math.min(total * 8, 160)}h 45m`;
            
            // Simple productivity chart simulation
            const chart = document.getElementById('productivityChart');
            if (chart) {
                const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
                chart.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; flex-direction: column; gap: 10px;">
                        <div style="font-size: 48px; font-weight: 700; color: var(--primary-color);">${percentage}%</div>
                        <div style="color: var(--text-secondary);">Tasks Completed</div>
                        <div style="width: 100%; height: 8px; background: var(--background-secondary); border-radius: 4px; overflow: hidden;">
                            <div style="width: ${percentage}%; height: 100%; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); transition: width 0.3s ease;"></div>
                        </div>
                    </div>
                `;
            }
        }

        // Utility Functions
        function sortTasks() {
            const options = ['Date Created', 'Alphabetical', 'Completion Status', 'Importance'];
            const choice = prompt(`Sort tasks by:\n1. ${options[0]}\n2. ${options[1]}\n3. ${options[2]}\n4. ${options[3]}\n\nEnter number (1-4):`);
            
            switch(choice) {
                case '1':
                    tasks.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    break;
                case '2':
                    tasks.sort((a, b) => a.text.localeCompare(b.text));
                    break;
                case '3':
                    tasks.sort((a, b) => a.completed - b.completed);
                    break;
                case '4':
                    tasks.sort((a, b) => b.important - a.important);
                    break;
                default:
                    return;
            }
            
            saveTasks();
            renderTasks();
        }

        function filterTasks() {
            // Simple filter implementation
            const filter = prompt('Filter tasks:\n1. All\n2. Completed\n3. Incomplete\n4. Important\n\nEnter number (1-4):');
            
            // This would be implemented with a more sophisticated filtering system
            alert('Filter functionality coming soon! 🔍');
        }

        function markAllImportant() {
            const incompleteTasks = tasks.filter(t => !t.completed);
            incompleteTasks.forEach(task => task.important = true);
            saveTasks();
            renderTasks();
        }

        function exportAnalytics() {
            const data = {
                totalTasks: tasks.length,
                completedTasks: tasks.filter(t => t.completed).length,
                importantTasks: tasks.filter(t => t.important).length,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chrono-focus-analytics.json';
            a.click();
        }

        function exportData() {
            const data = {
                user: currentUser,
                tasks: tasks,
                theme: currentTheme,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chrono-focus-backup.json';
            a.click();
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.tasks) {
                                tasks = data.tasks;
                                saveTasks();
                                renderTasks();
                                updateAnalytics();
                                alert('Data imported successfully! 📥');
                            }
                        } catch (error) {
                            alert('Error importing data. Please check the file format. ❌');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                tasks = [];
                saveTasks();
                renderTasks();
                updateAnalytics();
                alert('All data cleared! 🧹');
            }
        }

        // Responsive Design
        function setupResponsiveDesign() {
            function checkMobile() {
                const isMobile = window.innerWidth <= 768;
                const mobileHeader = document.querySelector('.mobile-header');
                const sidebar = document.getElementById('sidebar');
                
                if (isMobile) {
                    mobileHeader.style.display = 'flex';
                    sidebar.classList.remove('active');
                } else {
                    mobileHeader.style.display = 'none';
                    sidebar.classList.remove('active');
                }
            }
            
            checkMobile();
            window.addEventListener('resize', checkMobile);
        }

        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        // Add some demo tasks on first load
        if (tasks.length === 0) {
            const demoTasks = [
                { id: '1', text: '🎯 Welcome to Chrono Focus Pro!', completed: false, important: true, createdAt: new Date().toISOString(), dueDate: null, notes: '', tags: [] },
                { id: '2', text: '📝 Try adding your first task', completed: false, important: false, createdAt: new Date().toISOString(), dueDate: null, notes: '', tags: [] },
                { id: '3', text: '⭐ Mark important tasks with the star', completed: false, important: false, createdAt: new Date().toISOString(), dueDate: null, notes: '', tags: [] },
                { id: '4', text: '🗓️ Schedule tasks on the calendar', completed: false, important: false, createdAt: new Date().toISOString(), dueDate: null, notes: '', tags: [] },
                { id: '5', text: '🤖 Chat with OptiChain AI Pro', completed: false, important: false, createdAt: new Date().toISOString(), dueDate: null, notes: '', tags: [] }
            ];
            
            tasks = demoTasks;
            saveTasks();
        }
    </script>
</body>
</html>
