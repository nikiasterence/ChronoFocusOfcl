<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✓</text></svg>">
<title>Chrono Focus Pro - Advanced Task & Calendar Manager</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
/* --- Default Google-like Palette --- */
--background: #FAFAFA;
--surface: #FFFFFF;
--surface-elevated: #FFFFFF;
--primary: #1A73E8;
--primary-rgb: 26, 115, 232;
--primary-light: #E8F0FE;
--secondary: #5F6368;
--text-primary: #202124;
--text-secondary: #5F6368;
--text-disabled: #9AA0A6;
--border-color: #E8EAED;
--success: #34A853;
--warning: #FBBC04;
--danger: #EA4335;
--hover-overlay: rgba(60, 64, 67, 0.08);
--active-overlay: rgba(60, 64, 67, 0.12);
--border-radius: 8px;
--border-radius-lg: 16px;
--transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
--shadow-sm: 0 1px 3px rgba(60, 64, 67, 0.15);
--shadow-md: 0 4px 6px rgba(60, 64, 67, 0.15);
--shadow-lg: 0 8px 25px rgba(60, 64, 67, 0.15);
--shadow-xl: 0 12px 40px rgba(60, 64, 67, 0.2);

/* Task Priority Colors */
--priority-high: #EA4335;
--priority-medium: #FBBC04;
--priority-low: #34A853;

/* Calendar Colors */
--today-bg: #E8F0FE;
--today-text: #1A73E8;
--weekend-bg: #F8F9FA;
--weekend-text: #5F6368;
}

/* Dark Mode Themes */
body.theme-dark { 
--background: #0D1117; 
--surface: #161B22; 
--surface-elevated: #21262D; 
--primary: #58A6FF; 
--primary-rgb: 88, 166, 255;
--primary-light: rgba(88, 166, 255, 0.1);
--text-primary: #F0F6FC; 
--text-secondary: #8B949E; 
--text-disabled: #484F58;
--border-color: #30363D; 
--hover-overlay: rgba(177, 186, 196, 0.12);
--active-overlay: rgba(177, 186, 196, 0.16);
}

body.theme-midnight { 
--background: #1A1A2E; 
--surface: #16213E; 
--surface-elevated: #0F3460;
--primary: #E94560; 
--primary-rgb: 233, 69, 96;
--primary-light: rgba(233, 69, 96, 0.1);
--text-primary: #F5F5F5; 
--text-secondary: #B8B8B8; 
--border-color: #2C3E50; 
}

body.theme-forest { 
--background: #0F2027; 
--surface: #203A43; 
--surface-elevated: #2C5364;
--primary: #4ECDC4; 
--primary-rgb: 78, 205, 196;
--primary-light: rgba(78, 205, 196, 0.1);
--text-primary: #F7F7F7; 
--text-secondary: #A4B0BE; 
--border-color: #34495E; 
}

/* Global Styles */
* { 
margin: 0; 
padding: 0; 
box-sizing: border-box; 
}

body { 
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
background-color: var(--background);
color: var(--text-primary);
line-height: 1.5;
transition: var(--transition);
overflow-x: hidden;
}

/* App Layout */
.app-container {
display: flex;
height: 100vh;
max-height: 100vh;
overflow: hidden;
}

/* Sidebar */
.sidebar {
width: 300px;
background: var(--surface);
border-right: 1px solid var(--border-color);
display: flex;
flex-direction: column;
transition: var(--transition);
box-shadow: var(--shadow-sm);
z-index: 100;
}

.sidebar.collapsed {
width: 0;
overflow: hidden;
}

.sidebar-header {
padding: 20px;
border-bottom: 1px solid var(--border-color);
background: var(--surface-elevated);
}

.app-title {
font-size: 1.5rem;
font-weight: 700;
color: var(--primary);
margin: 0;
display: flex;
align-items: center;
gap: 10px;
}

.sidebar-nav {
padding: 16px 0;
}

.nav-item {
display: flex;
align-items: center;
padding: 12px 20px;
cursor: pointer;
transition: var(--transition);
border: none;
background: none;
width: 100%;
text-align: left;
font-size: 0.875rem;
font-weight: 500;
color: var(--text-primary);
gap: 12px;
}

.nav-item:hover {
background: var(--hover-overlay);
}

.nav-item.active {
background: var(--primary-light);
color: var(--primary);
border-right: 3px solid var(--primary);
}

.nav-item i {
width: 20px;
text-align: center;
}

/* Main Content */
.main-content {
flex: 1;
display: flex;
flex-direction: column;
overflow: hidden;
}

.main-header {
padding: 20px 24px;
background: var(--surface);
border-bottom: 1px solid var(--border-color);
display: flex;
align-items: center;
justify-content: space-between;
flex-wrap: wrap;
gap: 16px;
box-shadow: var(--shadow-sm);
z-index: 50;
}

.header-title {
font-size: 1.75rem;
font-weight: 600;
color: var(--text-primary);
display: flex;
align-items: center;
gap: 12px;
}

.header-controls {
display: flex;
align-items: center;
gap: 12px;
}

.toggle-sidebar-btn {
display: none;
background: none;
border: none;
color: var(--text-secondary);
font-size: 1.25rem;
cursor: pointer;
padding: 8px;
border-radius: var(--border-radius);
transition: var(--transition);
}

.toggle-sidebar-btn:hover {
background: var(--hover-overlay);
}

/* Content Area */
.content-area {
flex: 1;
display: flex;
overflow: hidden;
}

.calendar-section {
width: 350px;
background: var(--surface);
border-right: 1px solid var(--border-color);
display: flex;
flex-direction: column;
transition: var(--transition);
}

.calendar-section.hidden {
width: 0;
overflow: hidden;
}

.tasks-section {
flex: 1;
background: var(--surface);
display: flex;
flex-direction: column;
overflow: hidden;
}

/* Calendar Styles */
.calendar-header {
padding: 20px;
border-bottom: 1px solid var(--border-color);
text-align: center;
background: var(--surface-elevated);
}

.calendar-nav {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 16px;
}

.calendar-nav button {
background: none;
border: none;
color: var(--text-secondary);
cursor: pointer;
padding: 8px;
border-radius: var(--border-radius);
transition: var(--transition);
font-size: 1.1rem;
}

.calendar-nav button:hover {
background: var(--hover-overlay);
color: var(--text-primary);
}

.calendar-title {
font-size: 1.1rem;
font-weight: 600;
color: var(--text-primary);
}

.calendar-grid {
padding: 20px;
overflow-y: auto;
flex: 1;
}

.calendar-weekdays {
display: grid;
grid-template-columns: repeat(7, 1fr);
gap: 4px;
margin-bottom: 8px;
}

.calendar-weekday {
padding: 8px 4px;
text-align: center;
font-size: 0.75rem;
font-weight: 600;
color: var(--text-secondary);
text-transform: uppercase;
letter-spacing: 0.5px;
}

.calendar-days {
display: grid;
grid-template-columns: repeat(7, 1fr);
gap: 4px;
}

.calendar-day {
aspect-ratio: 1;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
cursor: pointer;
border-radius: var(--border-radius);
transition: var(--transition);
position: relative;
font-size: 0.875rem;
font-weight: 500;
background: transparent;
border: 1px solid transparent;
}

.calendar-day:hover {
background: var(--hover-overlay);
}

.calendar-day.today {
background: var(--today-bg);
color: var(--today-text);
font-weight: 600;
}

.calendar-day.selected {
background: var(--primary);
color: white;
}

.calendar-day.other-month {
color: var(--text-disabled);
}

.calendar-day.has-tasks::after {
content: '';
width: 6px;
height: 6px;
background: var(--primary);
border-radius: 50%;
position: absolute;
bottom: 2px;
left: 50%;
transform: translateX(-50%);
}

/* Task Section Styles */
.tasks-header {
padding: 20px 24px;
border-bottom: 1px solid var(--border-color);
background: var(--surface-elevated);
}

.task-input-container {
display: flex;
gap: 12px;
align-items: flex-start;
margin-bottom: 20px;
}

.task-input-wrapper {
flex: 1;
position: relative;
}

.task-input {
width: 100%;
padding: 16px 20px;
border: 2px solid var(--border-color);
border-radius: var(--border-radius-lg);
font-size: 1rem;
background: var(--surface);
color: var(--text-primary);
transition: var(--transition);
resize: none;
font-family: inherit;
line-height: 1.5;
min-height: 56px;
max-height: 120px;
}

.task-input:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1);
}

.task-input::placeholder {
color: var(--text-secondary);
}

.add-task-btn {
padding: 16px 24px;
background: var(--primary);
color: white;
border: none;
border-radius: var(--border-radius-lg);
font-weight: 600;
cursor: pointer;
transition: var(--transition);
display: flex;
align-items: center;
gap: 8px;
font-size: 1rem;
box-shadow: var(--shadow-sm);
}

.add-task-btn:hover {
background: var(--primary);
transform: translateY(-1px);
box-shadow: var(--shadow-md);
}

.add-task-btn:active {
transform: translateY(0);
}

.task-options {
display: flex;
gap: 12px;
flex-wrap: wrap;
}

.task-option-select {
padding: 8px 16px;
border: 1px solid var(--border-color);
border-radius: var(--border-radius);
background: var(--surface);
color: var(--text-primary);
font-size: 0.875rem;
cursor: pointer;
transition: var(--transition);
}

.task-option-select:focus {
outline: none;
border-color: var(--primary);
}

/* Task List */
.tasks-content {
flex: 1;
overflow-y: auto;
padding: 0 24px 24px;
}

.task-list-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 20px;
padding-top: 20px;
}

.task-count {
color: var(--text-secondary);
font-size: 0.875rem;
font-weight: 500;
}

.task-filters {
display: flex;
gap: 8px;
}

.filter-btn {
padding: 6px 12px;
background: none;
border: 1px solid var(--border-color);
border-radius: var(--border-radius);
color: var(--text-secondary);
font-size: 0.875rem;
cursor: pointer;
transition: var(--transition);
}

.filter-btn:hover {
background: var(--hover-overlay);
}

.filter-btn.active {
background: var(--primary);
color: white;
border-color: var(--primary);
}

.tasks-list {
list-style: none;
}

.task-item {
display: flex;
align-items: flex-start;
gap: 16px;
padding: 16px;
background: var(--surface-elevated);
border: 1px solid var(--border-color);
border-radius: var(--border-radius-lg);
margin-bottom: 12px;
transition: var(--transition);
cursor: pointer;
opacity: 0;
animation: slideInUp 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
}

.task-item:nth-child(1) { animation-delay: 0.05s; }
.task-item:nth-child(2) { animation-delay: 0.1s; }
.task-item:nth-child(3) { animation-delay: 0.15s; }
.task-item:nth-child(4) { animation-delay: 0.2s; }
.task-item:nth-child(5) { animation-delay: 0.25s; }

.task-item:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
border-color: rgba(var(--primary-rgb), 0.3);
}

.task-item.completed {
opacity: 0.7;
background: var(--hover-overlay);
}

.task-item.completed .task-text {
text-decoration: line-through;
color: var(--text-secondary);
}

.task-item.dragging {
transform: rotate(5deg) scale(1.05);
box-shadow: var(--shadow-xl);
z-index: 1000;
}

.task-checkbox {
width: 20px;
height: 20px;
border: 2px solid var(--border-color);
border-radius: 50%;
cursor: pointer;
transition: var(--transition);
flex-shrink: 0;
position: relative;
margin-top: 2px;
}

.task-checkbox:hover {
border-color: var(--primary);
}

.task-checkbox.checked {
background: var(--primary);
border-color: var(--primary);
}

.task-checkbox.checked::after {
content: '✓';
color: white;
font-size: 12px;
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
font-weight: bold;
}

.task-content {
flex: 1;
min-width: 0;
}

.task-text {
font-size: 1rem;
color: var(--text-primary);
line-height: 1.5;
word-wrap: break-word;
margin-bottom: 4px;
}

.task-meta {
display: flex;
align-items: center;
gap: 12px;
font-size: 0.75rem;
color: var(--text-secondary);
}

.task-priority {
padding: 2px 8px;
border-radius: 12px;
font-weight: 500;
font-size: 0.7rem;
text-transform: uppercase;
letter-spacing: 0.5px;
}

.task-priority.high {
background: rgba(234, 67, 53, 0.1);
color: var(--priority-high);
}

.task-priority.medium {
background: rgba(251, 188, 4, 0.1);
color: var(--priority-medium);
}

.task-priority.low {
background: rgba(52, 168, 83, 0.1);
color: var(--priority-low);
}

.task-date {
display: flex;
align-items: center;
gap: 4px;
}

.task-actions {
display: flex;
gap: 8px;
opacity: 0;
transition: var(--transition);
}

.task-item:hover .task-actions {
opacity: 1;
}

.task-action-btn {
width: 32px;
height: 32px;
display: flex;
align-items: center;
justify-content: center;
background: none;
border: none;
border-radius: var(--border-radius);
color: var(--text-secondary);
cursor: pointer;
transition: var(--transition);
font-size: 0.875rem;
}

.task-action-btn:hover {
background: var(--hover-overlay);
color: var(--text-primary);
}

.task-action-btn.edit:hover {
color: var(--primary);
}

.task-action-btn.delete:hover {
color: var(--danger);
}

/* Theme Selector */
.theme-selector {
position: relative;
}

.theme-btn {
background: none;
border: none;
color: var(--text-secondary);
cursor: pointer;
padding: 8px;
border-radius: var(--border-radius);
transition: var(--transition);
font-size: 1.1rem;
}

.theme-btn:hover {
background: var(--hover-overlay);
color: var(--text-primary);
}

.theme-dropdown {
position: absolute;
top: 100%;
right: 0;
background: var(--surface-elevated);
border: 1px solid var(--border-color);
border-radius: var(--border-radius-lg);
box-shadow: var(--shadow-xl);
padding: 8px;
min-width: 200px;
z-index: 1000;
opacity: 0;
visibility: hidden;
transform: translateY(-10px);
transition: var(--transition);
}

.theme-dropdown.visible {
opacity: 1;
visibility: visible;
transform: translateY(0);
}

.theme-option {
display: flex;
align-items: center;
gap: 12px;
padding: 12px;
cursor: pointer;
border-radius: var(--border-radius);
transition: var(--transition);
}

.theme-option:hover {
background: var(--hover-overlay);
}

.theme-color {
width: 16px;
height: 16px;
border-radius: 50%;
}

/* Toast Notifications */
.toast-container {
position: fixed;
top: 20px;
right: 20px;
z-index: 2000;
}

.toast {
background: var(--surface-elevated);
color: var(--text-primary);
padding: 16px 20px;
border-radius: var(--border-radius-lg);
box-shadow: var(--shadow-xl);
border: 1px solid var(--border-color);
margin-bottom: 12px;
transform: translateX(400px);
transition: var(--transition);
max-width: 300px;
}

.toast.show {
transform: translateX(0);
}

.toast.success {
border-left: 4px solid var(--success);
}

.toast.error {
border-left: 4px solid var(--danger);
}

/* Animations */
@keyframes slideInUp {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes fadeOut {
from {
opacity: 1;
transform: scale(1);
}
to {
opacity: 0;
transform: scale(0.9);
}
}

/* Responsive Design */
@media (max-width: 768px) {
.sidebar {
position: fixed;
left: 0;
top: 0;
height: 100vh;
z-index: 200;
transform: translateX(-100%);
width: 280px;
}

.sidebar.visible {
transform: translateX(0);
}

.sidebar.collapsed {
width: 280px;
transform: translateX(-100%);
}

.main-content {
margin-left: 0;
}

.toggle-sidebar-btn {
display: block;
}

.calendar-section {
width: 100%;
position: fixed;
left: 0;
top: 0;
height: 100vh;
z-index: 150;
transform: translateX(-100%);
}

.calendar-section.visible {
transform: translateX(0);
}

.calendar-section.hidden {
width: 100%;
transform: translateX(-100%);
}

.main-header {
padding: 16px 20px;
}

.header-title {
font-size: 1.5rem;
}

.tasks-header {
padding: 16px 20px;
}

.tasks-content {
padding: 0 20px 20px;
}

.task-input-container {
flex-direction: column;
}

.task-options {
justify-content: center;
}

.app-container {
flex-direction: column;
}
}

@media (max-width: 480px) {
.task-item {
padding: 12px;
}

.task-input {
font-size: 16px; /* Prevents zoom on iOS */
}

.calendar-day {
font-size: 0.75rem;
}

.theme-dropdown {
right: auto;
left: 0;
}
}

/* Scrollbar Styling */
::-webkit-scrollbar {
width: 6px;
}

::-webkit-scrollbar-track {
background: var(--background);
}

::-webkit-scrollbar-thumb {
background: var(--border-color);
border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
background: var(--text-secondary);
}

/* Drag and Drop */
.drag-over {
background: var(--primary-light);
border-color: var(--primary);
}

.drop-zone {
min-height: 60px;
border: 2px dashed var(--border-color);
border-radius: var(--border-radius-lg);
display: flex;
align-items: center;
justify-content: center;
color: var(--text-secondary);
font-size: 0.875rem;
margin: 12px 0;
transition: var(--transition);
}

.drop-zone.active {
border-color: var(--primary);
background: var(--primary-light);
color: var(--primary);
}

/* Empty State */
.empty-state {
text-align: center;
padding: 60px 20px;
color: var(--text-secondary);
}

.empty-state i {
font-size: 3rem;
margin-bottom: 16px;
color: var(--text-disabled);
}

.empty-state h3 {
font-size: 1.25rem;
font-weight: 600;
margin-bottom: 8px;
color: var(--text-primary);
}

.empty-state p {
font-size: 0.875rem;
line-height: 1.5;
}

/* Loading States */
.loading {
display: inline-block;
width: 20px;
height: 20px;
border: 2px solid var(--border-color);
border-radius: 50%;
border-top-color: var(--primary);
animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
to { transform: rotate(360deg); }
}

/* Focus Styles for Accessibility */
.task-item:focus-visible,
.calendar-day:focus-visible,
button:focus-visible,
input:focus-visible,
select:focus-visible {
outline: 2px solid var(--primary);
outline-offset: 2px;
}

/* Print Styles */
@media print {
.sidebar,
.theme-selector,
.task-actions,
.calendar-nav {
display: none;
}

.main-content {
margin-left: 0;
}

.task-item {
break-inside: avoid;
border: 1px solid #ccc;
}
}
</style>
</head>
<body>

<div class="app-container">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h1 class="app-title">
        <i class="fas fa-check-circle"></i>
        Chrono Focus Pro
      </h1>
    </div>
    <nav class="sidebar-nav">
      <button class="nav-item active" data-view="today">
        <i class="fas fa-calendar-day"></i>
        Today
      </button>
      <button class="nav-item" data-view="upcoming">
        <i class="fas fa-calendar-week"></i>
        Upcoming
      </button>
      <button class="nav-item" data-view="all">
        <i class="fas fa-list"></i>
        All Tasks
      </button>
      <button class="nav-item" data-view="completed">
        <i class="fas fa-check-double"></i>
        Completed
      </button>
      <button class="nav-item" data-view="priority">
        <i class="fas fa-star"></i>
        Priority
      </button>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <div class="main-header">
      <div style="display: flex; align-items: center; gap: 12px;">
        <button class="toggle-sidebar-btn" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
        <h1 class="header-title" id="pageTitle">
          <i class="fas fa-calendar-day"></i>
          Today
        </h1>
      </div>
      <div class="header-controls">
        <button class="theme-btn" id="toggleCalendar" title="Toggle Calendar">
          <i class="fas fa-calendar"></i>
        </button>
        <div class="theme-selector">
          <button class="theme-btn" id="themeButton" title="Change Theme">
            <i class="fas fa-palette"></i>
          </button>
          <div class="theme-dropdown" id="themeDropdown">
            <div class="theme-option" data-theme="default">
              <div class="theme-color" style="background: #1A73E8;"></div>
              <span>Light</span>
            </div>
            <div class="theme-option" data-theme="theme-dark">
              <div class="theme-color" style="background: #58A6FF;"></div>
              <span>Dark</span>
            </div>
            <div class="theme-option" data-theme="theme-midnight">
              <div class="theme-color" style="background: #E94560;"></div>
              <span>Midnight</span>
            </div>
            <div class="theme-option" data-theme="theme-forest">
              <div class="theme-color" style="background: #4ECDC4;"></div>
              <span>Forest</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
      <!-- Calendar Section -->
      <div class="calendar-section" id="calendarSection">
        <div class="calendar-header">
          <div class="calendar-nav">
            <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
            <div class="calendar-title" id="calendarTitle"></div>
            <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
          </div>
          <button style="padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: var(--border-radius); font-size: 0.875rem; cursor: pointer;" id="todayBtn">Today</button>
        </div>
        <div class="calendar-grid">
          <div class="calendar-weekdays">
            <div class="calendar-weekday">Sun</div>
            <div class="calendar-weekday">Mon</div>
            <div class="calendar-weekday">Tue</div>
            <div class="calendar-weekday">Wed</div>
            <div class="calendar-weekday">Thu</div>
            <div class="calendar-weekday">Fri</div>
            <div class="calendar-weekday">Sat</div>
          </div>
          <div class="calendar-days" id="calendarDays"></div>
        </div>
      </div>

      <!-- Tasks Section -->
      <div class="tasks-section">
        <div class="tasks-header">
          <div class="task-input-container">
            <div class="task-input-wrapper">
              <textarea 
                class="task-input" 
                id="taskInput" 
                placeholder="Add a task..." 
                rows="1"
              ></textarea>
            </div>
            <button class="add-task-btn" id="addTaskBtn">
              <i class="fas fa-plus"></i>
              Add
            </button>
          </div>
          <div class="task-options">
            <select class="task-option-select" id="taskPriority">
              <option value="low">Low Priority</option>
              <option value="medium">Medium Priority</option>
              <option value="high">High Priority</option>
            </select>
            <select class="task-option-select" id="taskCategory">
              <option value="general">📋 General</option>
              <option value="work">💼 Work</option>
              <option value="personal">👤 Personal</option>
              <option value="shopping">🛒 Shopping</option>
              <option value="health">❤️ Health</option>
              <option value="learning">📚 Learning</option>
            </select>
          </div>
        </div>

        <div class="tasks-content">
          <div class="task-list-header">
            <div class="task-count" id="taskCount">0 tasks</div>
            <div class="task-filters">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="pending">Active</button>
              <button class="filter-btn" data-filter="completed">Done</button>
            </div>
          </div>

          <div class="drop-zone" id="dropZone" style="display: none;">
            Drop task here to move to this date
          </div>

          <ul class="tasks-list" id="tasksList"></ul>

          <div class="empty-state" id="emptyState" style="display: none;">
            <i class="fas fa-clipboard-list"></i>
            <h3>No tasks yet</h3>
            <p>Add a task above to get started on your productivity journey!</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<script>
class ChronoFocusPro {
  constructor() {
    this.currentDate = new Date();
    this.selectedDate = new Date();
    this.currentView = 'today';
    this.currentFilter = 'all';
    this.draggedTask = null;
    
    // Initialize
    this.initializeElements();
    this.setupEventListeners();
    this.loadTheme();
    this.loadTasks();
    this.renderCalendar();
    this.updateView();
    this.autoResizeTextarea();
  }

  initializeElements() {
    this.elements = {
      // Sidebar
      sidebar: document.getElementById('sidebar'),
      toggleSidebar: document.getElementById('toggleSidebar'),
      navItems: document.querySelectorAll('.nav-item'),
      
      // Header
      pageTitle: document.getElementById('pageTitle'),
      toggleCalendar: document.getElementById('toggleCalendar'),
      themeButton: document.getElementById('themeButton'),
      themeDropdown: document.getElementById('themeDropdown'),
      
      // Calendar
      calendarSection: document.getElementById('calendarSection'),
      calendarTitle: document.getElementById('calendarTitle'),
      calendarDays: document.getElementById('calendarDays'),
      prevMonth: document.getElementById('prevMonth'),
      nextMonth: document.getElementById('nextMonth'),
      todayBtn: document.getElementById('todayBtn'),
      
      // Tasks
      taskInput: document.getElementById('taskInput'),
      addTaskBtn: document.getElementById('addTaskBtn'),
      taskPriority: document.getElementById('taskPriority'),
      taskCategory: document.getElementById('taskCategory'),
      tasksList: document.getElementById('tasksList'),
      taskCount: document.getElementById('taskCount'),
      filterBtns: document.querySelectorAll('.filter-btn'),
      dropZone: document.getElementById('dropZone'),
      emptyState: document.getElementById('emptyState'),
      
      // Toast
      toastContainer: document.getElementById('toastContainer')
    };
  }

  setupEventListeners() {
    // Sidebar
    this.elements.toggleSidebar.addEventListener('click', () => this.toggleSidebar());
    this.elements.navItems.forEach(item => {
      item.addEventListener('click', () => this.switchView(item.dataset.view));
    });

    // Calendar
    this.elements.toggleCalendar.addEventListener('click', () => this.toggleCalendar());
    this.elements.prevMonth.addEventListener('click', () => this.changeMonth(-1));
    this.elements.nextMonth.addEventListener('click', () => this.changeMonth(1));
    this.elements.todayBtn.addEventListener('click', () => this.goToToday());

    // Tasks
    this.elements.taskInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        this.addTask();
      }
    });
    this.elements.addTaskBtn.addEventListener('click', () => this.addTask());

    // Filters
    this.elements.filterBtns.forEach(btn => {
      btn.addEventListener('click', () => this.setFilter(btn.dataset.filter));
    });

    // Theme
    this.elements.themeButton.addEventListener('click', () => this.toggleThemeDropdown());
    document.addEventListener('click', (e) => {
      if (!this.elements.themeButton.contains(e.target) && !this.elements.themeDropdown.contains(e.target)) {
        this.elements.themeDropdown.classList.remove('visible');
      }
    });

    // Theme options
    document.querySelectorAll('.theme-option').forEach(option => {
      option.addEventListener('click', () => {
        this.setTheme(option.dataset.theme);
        this.elements.themeDropdown.classList.remove('visible');
      });
    });

    // Drop zone
    this.elements.dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      this.elements.dropZone.classList.add('active');
    });

    this.elements.dropZone.addEventListener('dragleave', () => {
      this.elements.dropZone.classList.remove('active');
    });

    this.elements.dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      this.elements.dropZone.classList.remove('active');
      if (this.draggedTask) {
        this.moveTaskToDate(this.draggedTask.id, this.selectedDate);
      }
    });

    // Responsive
    window.addEventListener('resize', () => this.handleResize());
    this.handleResize();
  }

  // Calendar Methods
  renderCalendar() {
    const year = this.currentDate.getFullYear();
    const month = this.currentDate.getMonth();
    
    // Update title
    this.elements.calendarTitle.textContent = new Date(year, month).toLocaleDateString('en-US', { 
      month: 'long', 
      year: 'numeric' 
    });

    // Clear days
    this.elements.calendarDays.innerHTML = '';

    // Get first day of month and number of days
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const daysInPrevMonth = new Date(year, month, 0).getDate();

    // Add previous month days
    for (let i = firstDay - 1; i >= 0; i--) {
      const day = daysInPrevMonth - i;
      const dayElement = this.createCalendarDay(day, true, new Date(year, month - 1, day));
      this.elements.calendarDays.appendChild(dayElement);
    }

    // Add current month days
    for (let day = 1; day <= daysInMonth; day++) {
      const dayElement = this.createCalendarDay(day, false, new Date(year, month, day));
      this.elements.calendarDays.appendChild(dayElement);
    }

    // Add next month days
    const remainingCells = 42 - (firstDay + daysInMonth);
    for (let day = 1; day <= remainingCells; day++) {
      const dayElement = this.createCalendarDay(day, true, new Date(year, month + 1, day));
      this.elements.calendarDays.appendChild(dayElement);
    }
  }

  createCalendarDay(day, isOtherMonth, fullDate) {
    const dayElement = document.createElement('div');
    dayElement.className = 'calendar-day';
    dayElement.textContent = day;

    if (isOtherMonth) {
      dayElement.classList.add('other-month');
    }

    // Check if today
    const today = new Date();
    if (this.isSameDate(fullDate, today)) {
      dayElement.classList.add('today');
    }

    // Check if selected
    if (this.isSameDate(fullDate, this.selectedDate)) {
      dayElement.classList.add('selected');
    }

    // Check if has tasks
    const tasks = this.getTasksForDate(fullDate);
    if (tasks.length > 0) {
      dayElement.classList.add('has-tasks');
    }

    // Click handler
    dayElement.addEventListener('click', () => {
      this.selectDate(fullDate);
    });

    return dayElement;
  }

  selectDate(date) {
    this.selectedDate = new Date(date);
    this.renderCalendar();
    this.updateView();
    this.showDropZone();
  }

  changeMonth(delta) {
    this.currentDate.setMonth(this.currentDate.getMonth() + delta);
    this.renderCalendar();
  }

  goToToday() {
    this.currentDate = new Date();
    this.selectedDate = new Date();
    this.renderCalendar();
    this.updateView();
  }

  // Task Methods
  addTask() {
    const text = this.elements.taskInput.value.trim();
    if (!text) {
      this.showToast('Please enter a task', 'error');
      return;
    }

    const task = {
      id: 'task_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
      text: text,
      completed: false,
      priority: this.elements.taskPriority.value,
      category: this.elements.taskCategory.value,
      date: this.formatDate(this.selectedDate),
      createdAt: new Date().toISOString()
    };

    const tasks = this.getTasks();
    tasks.push(task);
    this.saveTasks(tasks);

    this.elements.taskInput.value = '';
    this.elements.taskInput.style.height = 'auto';
    this.updateView();
    this.renderCalendar();
    this.showToast('Task added successfully!', 'success');
  }

  toggleTask(taskId) {
    const tasks = this.getTasks();
    const task = tasks.find(t => t.id === taskId);
    if (task) {
      task.completed = !task.completed;
      task.completedAt = task.completed ? new Date().toISOString() : null;
      this.saveTasks(tasks);
      this.updateView();
      this.renderCalendar();
      
      if (task.completed) {
        this.showToast('Task completed! 🎉', 'success');
      }
    }
  }

  deleteTask(taskId) {
    if (confirm('Are you sure you want to delete this task?')) {
      const tasks = this.getTasks();
      const filteredTasks = tasks.filter(t => t.id !== taskId);
      this.saveTasks(filteredTasks);
      this.updateView();
      this.renderCalendar();
      this.showToast('Task deleted', 'success');
    }
  }

  editTask(taskId) {
    const tasks = this.getTasks();
    const task = tasks.find(t => t.id === taskId);
    if (task && !task.completed) {
      const newText = prompt('Edit task:', task.text);
      if (newText && newText.trim() && newText.trim() !== task.text) {
        task.text = newText.trim();
        this.saveTasks(tasks);
        this.updateView();
        this.showToast('Task updated!', 'success');
      }
    }
  }

  moveTaskToDate(taskId, newDate) {
    const tasks = this.getTasks();
    const task = tasks.find(t => t.id === taskId);
    if (task) {
      task.date = this.formatDate(newDate);
      this.saveTasks(tasks);
      this.updateView();
      this.renderCalendar();
      this.hideDropZone();
      this.showToast(`Task moved to ${newDate.toLocaleDateString()}`, 'success');
    }
  }

  // View Methods
  switchView(view) {
    this.currentView = view;
    
    // Update active nav item
    this.elements.navItems.forEach(item => {
      item.classList.toggle('active', item.dataset.view === view);
    });

    // Update page title
    const titles = {
      today: { icon: 'fas fa-calendar-day', text: 'Today' },
      upcoming: { icon: 'fas fa-calendar-week', text: 'Upcoming' },
      all: { icon: 'fas fa-list', text: 'All Tasks' },
      completed: { icon: 'fas fa-check-double', text: 'Completed' },
      priority: { icon: 'fas fa-star', text: 'Priority' }
    };

    const title = titles[view];
    this.elements.pageTitle.innerHTML = `<i class="${title.icon}"></i> ${title.text}`;

    this.updateView();
    this.closeSidebar();
  }

  updateView() {
    const tasks = this.getFilteredTasks();
    this.renderTasks(tasks);
    this.updateTaskCount(tasks.length);
  }

  getFilteredTasks() {
    let tasks = this.getTasks();
    
    // Filter by view
    switch (this.currentView) {
      case 'today':
        const today = this.formatDate(new Date());
        tasks = tasks.filter(task => task.date === today);
        break;
      case 'upcoming':
        const todayStr = this.formatDate(new Date());
        tasks = tasks.filter(task => task.date >= todayStr && !task.completed);
        break;
      case 'completed':
        tasks = tasks.filter(task => task.completed);
        break;
      case 'priority':
        tasks = tasks.filter(task => task.priority === 'high' && !task.completed);
        break;
      case 'all':
      default:
        // Show tasks for selected date when viewing all
        if (this.currentView === 'all' && this.selectedDate) {
          const selectedStr = this.formatDate(this.selectedDate);
          tasks = tasks.filter(task => task.date === selectedStr);
        }
        break;
    }

    // Filter by completion status
    if (this.currentFilter === 'pending') {
      tasks = tasks.filter(task => !task.completed);
    } else if (this.currentFilter === 'completed') {
      tasks = tasks.filter(task => task.completed);
    }

    // Sort tasks
    tasks.sort((a, b) => {
      // Completed tasks go to bottom
      if (a.completed !== b.completed) {
        return a.completed - b.completed;
      }
      
      // Sort by priority
      const priorityOrder = { high: 0, medium: 1, low: 2 };
      const priorityDiff = priorityOrder[a.priority] - priorityOrder[b.priority];
      if (priorityDiff !== 0) return priorityDiff;
      
      // Sort by creation date
      return new Date(b.createdAt) - new Date(a.createdAt);
    });

    return tasks;
  }

  renderTasks(tasks) {
    this.elements.tasksList.innerHTML = '';
    
    if (tasks.length === 0) {
      this.elements.emptyState.style.display = 'block';
    } else {
      this.elements.emptyState.style.display = 'none';
      
      tasks.forEach((task, index) => {
        const taskElement = this.createTaskElement(task, index);
        this.elements.tasksList.appendChild(taskElement);
      });
    }
  }

  createTaskElement(task, index) {
    const li = document.createElement('li');
    li.className = 'task-item';
    li.dataset.taskId = task.id;
    li.draggable = true;
    
    if (task.completed) {
      li.classList.add('completed');
    }

    const categoryIcons = {
      general: '📋',
      work: '💼',
      personal: '👤',
      shopping: '🛒',
      health: '❤️',
      learning: '📚'
    };

    li.innerHTML = `
      <div class="task-checkbox ${task.completed ? 'checked' : ''}" data-action="toggle"></div>
      <div class="task-content">
        <div class="task-text">${task.text}</div>
        <div class="task-meta">
          <span class="task-priority ${task.priority}">${task.priority}</span>
          <span class="task-date">
            <i class="fas fa-calendar"></i>
            ${new Date(task.date).toLocaleDateString()}
          </span>
          <span>${categoryIcons[task.category]} ${task.category}</span>
        </div>
      </div>
      <div class="task-actions">
        <button class="task-action-btn edit" data-action="edit" title="Edit">
          <i class="fas fa-edit"></i>
        </button>
        <button class="task-action-btn delete" data-action="delete" title="Delete">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    `;

    // Add event listeners
    li.addEventListener('click', (e) => {
      const action = e.target.closest('[data-action]')?.dataset.action;
      if (action === 'toggle') {
        this.toggleTask(task.id);
      } else if (action === 'edit') {
        this.editTask(task.id);
      } else if (action === 'delete') {
        this.deleteTask(task.id);
      }
    });

    // Drag and drop
    li.addEventListener('dragstart', (e) => {
      this.draggedTask = task;
      li.classList.add('dragging');
      this.showDropZone();
    });

    li.addEventListener('dragend', () => {
      li.classList.remove('dragging');
      this.draggedTask = null;
      this.hideDropZone();
    });

    return li;
  }

  // Filter Methods
  setFilter(filter) {
    this.currentFilter = filter;
    
    // Update active filter button
    this.elements.filterBtns.forEach(btn => {
      btn.classList.toggle('active', btn.dataset.filter === filter);
    });

    this.updateView();
  }

  // UI Helper Methods
  toggleSidebar() {
    if (window.innerWidth <= 768) {
      this.elements.sidebar.classList.toggle('visible');
    } else {
      this.elements.sidebar.classList.toggle('collapsed');
    }
  }

  closeSidebar() {
    if (window.innerWidth <= 768) {
      this.elements.sidebar.classList.remove('visible');
    }
  }

  toggleCalendar() {
    if (window.innerWidth <= 768) {
      this.elements.calendarSection.classList.toggle('visible');
    } else {
      this.elements.calendarSection.classList.toggle('hidden');
    }
  }

  showDropZone() {
    if (this.draggedTask) {
      this.elements.dropZone.style.display = 'flex';
    }
  }

  hideDropZone() {
    this.elements.dropZone.style.display = 'none';
  }

  updateTaskCount(count) {
    this.elements.taskCount.textContent = `${count} task${count !== 1 ? 's' : ''}`;
  }

  autoResizeTextarea() {
    this.elements.taskInput.addEventListener('input', () => {
      this.elements.taskInput.style.height = 'auto';
      this.elements.taskInput.style.height = Math.min(this.elements.taskInput.scrollHeight, 120) + 'px';
    });
  }

  handleResize() {
    if (window.innerWidth > 768) {
      this.elements.sidebar.classList.remove('visible');
      this.elements.calendarSection.classList.remove('visible');
    } else {
      this.elements.sidebar.classList.remove('collapsed');
      this.elements.calendarSection.classList.remove('hidden');
    }
  }

  // Theme Methods
  toggleThemeDropdown() {
    this.elements.themeDropdown.classList.toggle('visible');
  }

  setTheme(theme) {
    document.body.className = theme === 'default' ? '' : theme;
    localStorage.setItem('chronoFocusProTheme', theme);
  }

  loadTheme() {
    const savedTheme = localStorage.getItem('chronoFocusProTheme') || 'default';
    this.setTheme(savedTheme);
  }

  // Toast Methods
  showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.textContent = message;

    this.elements.toastContainer.appendChild(toast);

    // Trigger animation
    setTimeout(() => toast.classList.add('show'), 10);

    // Remove toast
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => {
        if (toast.parentNode) {
          toast.parentNode.removeChild(toast);
        }
      }, 300);
    }, 3000);
  }

  // Data Methods
  getTasks() {
    return JSON.parse(localStorage.getItem('chronoFocusProTasks') || '[]');
  }

  saveTasks(tasks) {
    localStorage.setItem('chronoFocusProTasks', JSON.stringify(tasks));
  }

  getTasksForDate(date) {
    const dateStr = this.formatDate(date);
    return this.getTasks().filter(task => task.date === dateStr);
  }

  // Utility Methods
  formatDate(date) {
    return date.toISOString().split('T')[0];
  }

  isSameDate(date1, date2) {
    return this.formatDate(date1) === this.formatDate(date2);
  }
}

// Initialize app when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  window.chronoFocusPro = new ChronoFocusPro();
});
</script>

</body>
</html>
