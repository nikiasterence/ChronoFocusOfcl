<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="Chronofocus.png" type="image/x-icon">
    <title>Material 3 Glassmorphic Unit Converter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6750A4;
            --on-primary: #FFFFFF;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            --secondary: #625B71;
            --on-secondary: #FFFFFF;
            --secondary-container: #E8DEF8;
            --on-secondary-container: #1D192B;
            --tertiary: #7D5260;
            --on-tertiary: #FFFFFF;
            --tertiary-container: #FFD8E4;
            --on-tertiary-container: #31111D;
            --surface: #FEF7FF;
            --on-surface: #1C1B1F;
            --surface-variant: #E7E0EC;
            --on-surface-variant: #49454F;
            --outline: #79747E;
            --shadow: #000000;
            
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.3);
            --blur: 20px;
            --shadow-elevation: 0 8px 24px rgba(0, 0, 0, 0.12);
            --transition: .3s cubic-bezier(0.4, 0, 0.2, 1);
            
            --theme-bg: linear-gradient(135deg, #a8b9ff 0%, #c792ea 100%);
        }

        .theme-dark {
            --primary: #D0BCFF;
            --on-primary: #381E72;
            --primary-container: #4F378B;
            --on-primary-container: #EADDFF;
            --secondary: #CCC2DC;
            --on-secondary: #332D41;
            --secondary-container: #4A4458;
            --on-secondary-container: #E8DEF8;
            --tertiary: #EFB8C8;
            --on-tertiary: #492532;
            --tertiary-container: #633B48;
            --on-tertiary-container: #FFD8E4;
            --surface: #141218;
            --on-surface: #E6E1E5;
            --surface-variant: #49454F;
            --on-surface-variant: #CAC4D0;
            --outline: #938F99;
            --shadow: #000000;
            
            --glass-bg: rgba(30, 30, 40, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --theme-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        html {
            height: 100%;
        }
        
        body {
            min-height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--theme-bg);
            overflow-x: hidden;
            transition: background 1s ease;
            color: var(--on-surface);
            padding: 24px 0; /* Add padding for scroll room */
        }

        body::before {
            content: '';
            position: fixed;
            top: 50%; 
            left: 50%;
            width: 200vmax; 
            height: 200vmax;
            transform: translate(-50%, -50%);
            background: radial-gradient(circle, var(--primary) 0%, var(--tertiary) 50%, var(--secondary) 100%);
            background-size: 200% 200%;
            animation: gradientMove 25s ease-in-out infinite;
            z-index: -2;
            opacity: 0.7;
        }

        @keyframes gradientMove {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            50% { transform: translate(-50%, -50%) rotate(180deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Material 3 Card Styles */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(var(--blur));
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-elevation);
            transition: var(--transition);
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.15);
        }

        /* Startup Animation */
        #startup-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--surface);
            z-index: 1000;
            perspective: 1000px;
            opacity: 1;
            transition: opacity 1s ease;
        }

        .cube {
            width: 150px;
            height: 150px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate-cube 8s infinite linear;
        }

        .cube.unfold {
            animation: unfold-cube 1.2s forwards cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .face {
            position: absolute;
            width: 150px;
            height: 150px;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(var(--blur));
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            color: var(--primary);
            font-weight: 300;
            transition: transform 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .front  { transform: rotateY(0deg) translateZ(75px); }
        .back   { transform: rotateY(180deg) translateZ(75px); }
        .right  { transform: rotateY(90deg) translateZ(75px); }
        .left   { transform: rotateY(-90deg) translateZ(75px); }
        .top    { transform: rotateX(90deg) translateZ(75px); }
        .bottom { transform: rotateX(-90deg) translateZ(75px); }

        @keyframes rotate-cube {
            from { transform: rotateX(0deg) rotateY(0deg); }
            to { transform: rotateX(360deg) rotateY(360deg); }
        }

        @keyframes unfold-cube {
            0% { transform: rotateX(45deg) rotateY(45deg) scale(1); }
            50% { transform: rotateX(0deg) rotateY(0deg) scale(1.5); }
            100% { transform: scale(20); opacity: 0; }
        }

        /* Page Layout */
        .page {
            display: none;
            width: 90%;
            max-width: 800px;
            padding: 24px;
            position: relative;
            z-index: 1;
            animation: fadeIn 0.8s ease forwards;
        }

        .active { 
            display: block; 
        }

        h2 {
            text-align: center;
            margin-bottom: 24px;
            font-size: 2rem;
            color: var(--on-surface);
            font-weight: 400;
            letter-spacing: -0.5px;
        }
        
        /* New Header for actions */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            gap: 12px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .header-back-btn {
            flex-grow: 1;
            text-align: left;
        }

        /* Menu Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .menu-item {
            padding: 24px 16px;
            text-align: center;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            background: var(--surface-variant);
            color: var(--on-surface-variant);
            transition: all .3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            min-height: 120px;
            justify-content: center;
        }

        .menu-item i {
            font-size: 2rem;
            color: var(--primary);
        }

        .menu-item:hover {
            background: var(--primary-container);
            color: var(--on-primary-container);
            transform: translateY(-4px);
        }

        .menu-item.active-category {
            background: var(--primary);
            color: var(--on-primary);
        }

        .menu-item.active-category i {
            color: var(--on-primary);
        }

        /* Converter Styles */
        .converter {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--on-surface-variant);
            margin-left: 4px;
        }

        input, select {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 400;
            outline: none;
            background: var(--surface-variant);
            color: var(--on-surface);
            border: 1px solid transparent;
            transition: all .3s ease;
        }

        input::placeholder { 
            color: var(--on-surface-variant); 
        }

        input:focus, select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.2);
        }

        select { 
            appearance: none; 
            -webkit-appearance: none; 
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M5%208l5%205%205-5%22%20stroke%3D%22%236750A4%22%20stroke-width%3D%222%22%20fill%3D%22none%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22/%3E%3C/svg%3E'); 
            background-repeat: no-repeat; 
            background-position: right 16px center; 
        }

        option { 
            background: var(--surface); 
            color: var(--on-surface); 
        }

        #conv-output {
            background: var(--surface-variant);
            font-weight: 500;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            color: var(--on-primary);
            transition: all .3s ease;
            flex: 1;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.875rem;
        }

        .btn-primary {
            background: var(--primary);
        }

        .btn-primary:hover {
            background: var(--primary-container);
            color: var(--on-primary-container);
            box-shadow: 0 4px 12px rgba(103, 80, 164, 0.3);
        }
        
        .btn.btn-back {
            flex: 0 1 auto;
            padding: 10px 18px;
        }

        .btn-secondary {
            background: var(--secondary-container);
            color: var(--on-secondary-container);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            color: var(--on-secondary);
        }

        /* History Section */
        .history-section {
            margin-top: 32px;
            max-height: 300px;
            overflow-y: auto;
            padding: 16px;
            border-radius: 16px;
            background: var(--surface-variant);
        }

        .history-section h3 {
            margin-bottom: 16px;
            text-align: center;
            font-weight: 500;
            color: var(--on-surface-variant);
            font-size: 1.125rem;
        }

        .history-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--outline);
            font-size: 0.875rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-item .conversion-text {
            flex: 1;
        }

        .history-item .conversion-date {
            font-size: 0.75rem;
            color: var(--on-surface-variant);
        }

        .clear-history {
            margin-top: 16px;
            text-align: center;
        }

        .clear-history-btn {
            background: transparent;
            border: none;
            color: var(--primary);
            font-size: 0.875rem;
            cursor: pointer;
            text-decoration: underline;
            transition: color 0.3s ease;
        }

        .clear-history-btn:hover {
            color: var(--tertiary);
        }

        /* Theme Selector */
         .theme-toggle-container {
            position: relative;
            display: flex;
        }
        
        .theme-selector {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 10;
            transition: transform 0.5s ease, opacity 0.5s ease;
            background: var(--glass-bg);
            backdrop-filter: blur(var(--blur));
            padding: 16px;
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-elevation);
        }

        .theme-selector.hidden {
            transform: translateY(-20px);
            opacity: 0;
            pointer-events: none;
        }

        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.3s ease, border-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .theme-option:hover {
            transform: scale(1.1);
        }

        .theme-option.active {
            border-color: var(--on-surface);
        }
        
        .icon-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--surface-variant);
            color: var(--on-surface-variant);
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 11;
            transition: all 0.3s ease;
        }
        
        .icon-btn:hover {
            transform: scale(1.08);
            background: var(--primary-container);
            color: var(--on-primary-container);
        }
        

        .credit {
            margin-top: 32px;
            text-align: center;
            font-size: 0.75rem;
            opacity: 0.7;
            color: var(--on-surface-variant);
        }

        @keyframes fadeIn {
            from { opacity:0; transform: translateY(20px); }
            to { opacity:1; transform: translateY(0); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .menu-grid { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 12px;
            }
            
            h2 { 
                font-size: 1.8rem; 
            }
            
            .page {
                padding: 16px;
            }
            
            input, select, .menu-item, .btn { 
                font-size: 15px; 
                padding: 14px;
            }
            
            .menu-item {
                min-height: 100px;
                padding: 16px 12px;
            }
            
            .menu-item i {
                font-size: 1.6rem;
            }
            
            .theme-option {
                width: 36px;
                height: 36px;
            }
            
            .icon-btn {
                width: 40px;
                height: 40px;
            }
        }

        @media (max-width: 480px) {
            body { padding: 16px 0; }
            .menu-grid { 
                grid-template-columns: 1fr; 
            }
            
            .btn-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Startup Animation -->
    <div id="startup-animation">
        <div class="cube">
            <div class="face front"><i class="fas fa-ruler"></i></div>
            <div class="face back"><i class="fas fa-weight-hanging"></i></div>
            <div class="face right"><i class="fas fa-temperature-high"></i></div>
            <div class="face left"><i class="fas fa-tachometer-alt"></i></div>
            <div class="face top"><i class="fas fa-bolt"></i></div>
            <div class="face bottom"><i class="fas fa-compress-arrows-alt"></i></div>
        </div>
    </div>

    <!-- Main Menu Page -->
    <div id="page1" class="page card">
        <div class="card-header">
             <div style="flex:1;"></div>
            <div class="header-actions">
                 <button class="icon-btn toggle-dark-mode" onclick="toggleDarkMode()">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="theme-toggle-container">
                    <button class="icon-btn toggle-themes" onclick="toggleThemeSelector(this)">
                        <i class="fas fa-palette"></i>
                    </button>
                    <div class="theme-selector hidden">
                        <div class="theme-option" style="background: linear-gradient(135deg, #ff8bb3, #ff6b9d);" data-theme="cosmic-pink"><i class="fas fa-heart"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #0f3460, #533483);" data-theme="midnight-blue"><i class="fas fa-moon"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #3a7d44, #69b578);" data-theme="forest-green"><i class="fas fa-leaf"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #ffb703, #fd9e02);" data-theme="golden-hour"><i class="fas fa-sun"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #6a00f4, #a100f2);" data-theme="synthwave"><i class="fas fa-music"></i></div>
                    </div>
                </div>
            </div>
        </div>
        
        <h2>Unit Converter</h2>
        <div class="menu-grid">
            <div class="menu-item" onclick="openConverter('Length')"><i class="fas fa-ruler"></i>Length</div>
            <div class="menu-item" onclick="openConverter('Area')"><i class="fas fa-border-all"></i>Area</div>
            <div class="menu-item" onclick="openConverter('Volume')"><i class="fas fa-cube"></i>Volume</div>
            <div class="menu-item" onclick="openConverter('Mass')"><i class="fas fa-weight-hanging"></i>Mass</div>
            <div class="menu-item" onclick="openConverter('Temperature')"><i class="fas fa-temperature-high"></i>Temperature</div>
            <div class="menu-item" onclick="openConverter('Speed')"><i class="fas fa-tachometer-alt"></i>Speed</div>
            <div class="menu-item" onclick="openConverter('Pressure')"><i class="fas fa-compress-arrows-alt"></i>Pressure</div>
            <div class="menu-item" onclick="openConverter('Power')"><i class="fas fa-bolt"></i>Power</div>
        </div>
        <div class="btn-group">
            <button class="btn btn-primary" onclick="openCalculator()"><i class="fas fa-calculator"></i> Scientific Calculator</button>
        </div>
        <div class="credit">Made with ❤️ by cozytustudios</div>
    </div>

    <!-- Converter Page -->
    <div id="page2" class="page card">
        <div class="card-header">
             <div class="header-back-btn">
                 <button class="btn btn-secondary btn-back" onclick="goMenu()"><i class="fas fa-arrow-left"></i> Back</button>
             </div>
             <div class="header-actions">
                <button class="icon-btn toggle-dark-mode" onclick="toggleDarkMode()"><i class="fas fa-moon"></i></button>
                <div class="theme-toggle-container">
                    <button class="icon-btn toggle-themes" onclick="toggleThemeSelector(this)"><i class="fas fa-palette"></i></button>
                    <div class="theme-selector hidden">
                        <div class="theme-option" style="background: linear-gradient(135deg, #ff8bb3, #ff6b9d);" data-theme="cosmic-pink"><i class="fas fa-heart"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #0f3460, #533483);" data-theme="midnight-blue"><i class="fas fa-moon"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #3a7d44, #69b578);" data-theme="forest-green"><i class="fas fa-leaf"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #ffb703, #fd9e02);" data-theme="golden-hour"><i class="fas fa-sun"></i></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #6a00f4, #a100f2);" data-theme="synthwave"><i class="fas fa-music"></i></div>
                    </div>
                </div>
             </div>
        </div>
        
        <h2 id="conv-title"></h2>
        <div class="converter">
            <div class="input-group">
                <label for="conv-input">Enter Value</label>
                <input type="number" id="conv-input" placeholder="Enter value">
            </div>
            <div class="input-group">
                <label for="conv-from">From Unit</label>
                <select id="conv-from"></select>
            </div>
            <div class="input-group">
                <label for="conv-to">To Unit</label>
                <select id="conv-to"></select>
            </div>
            <div class="input-group">
                <label for="conv-output">Result</label>
                <input type="text" id="conv-output" placeholder="Result" readonly>
            </div>
        </div>
        <div class="history-section">
            <h3>Conversion History</h3>
            <div id="history-list"></div>
            <div class="clear-history">
                <button class="clear-history-btn" onclick="clearHistory()">Clear History</button>
            </div>
        </div>
        <div class="credit">Made with ❤️ by cozytustudios</div>
    </div>

    <script>
        // Theme management
        const themes = {
            'cosmic-pink': { 
                primary: '#ff6b9d', onPrimary: '#FFFFFF', primaryContainer: '#ffd8e4', onPrimaryContainer: '#3f0021', secondary: '#7d5260', onSecondary: '#FFFFFF', secondaryContainer: '#ffd8e4', onSecondaryContainer: '#31101d', tertiary: '#7d5260', onTertiary: '#FFFFFF', tertiaryContainer: '#ffd8e4', onTertiaryContainer: '#31101d', surface: '#fff8fa', onSurface: '#1c1b1e', surfaceVariant: '#f2dde1', onSurfaceVariant: '#514347', outline: '#837377', bg: 'linear-gradient(135deg, #ff8bb3 0%, #ff6b9d 100%)'
            },
            'midnight-blue': { 
                primary: '#8b9dff', onPrimary: '#0a0048', primaryContainer: '#303c7a', onPrimaryContainer: '#dee0ff', secondary: '#c5c6dd', onSecondary: '#2e2f42', secondaryContainer: '#444559', onSecondaryContainer: '#e1e2f9', tertiary: '#e5bdd8', onTertiary: '#44263d', tertiaryContainer: '#5d3c54', onTertiaryContainer: '#ffd7f1', surface: '#131318', onSurface: '#e3e2e6', surfaceVariant: '#46464f', onSurfaceVariant: '#c7c5d0', outline: '#918f9a', bg: 'linear-gradient(135deg, #0f3460 0%, #533483 100%)'
            },
            'forest-green': { 
                primary: '#4caf50', onPrimary: '#003906', primaryContainer: '#0c5f1a', onPrimaryContainer: '#a8f5a6', secondary: '#b5ccb5', onSecondary: '#253425', secondaryContainer: '#3b4b3b', onSecondaryContainer: '#d1e8d0', tertiary: '#92cdce', onTertiary: '#003738', tertiaryContainer: '#1e4e4f', onTertiaryContainer: '#acebeb', surface: '#f8fbf8', onSurface: '#191c19', surfaceVariant: '#dde5db', onSurfaceVariant: '#424941', outline: '#727970', bg: 'linear-gradient(135deg, #3a7d44 0%, #69b578 100%)'
            },
            'golden-hour': { 
                primary: '#ff9800', onPrimary: '#3f2600', primaryContainer: '#5c3d00', onPrimaryContainer: '#ffddb8', secondary: '#e5bfa0', onSecondary: '#422c15', secondaryContainer: '#5b4229', onSecondaryContainer: '#ffddb8', tertiary: '#c6c3a5', onTertiary: '#31321a', tertiaryContainer: '#48482e', onTertiaryContainer: '#e3e0bf', surface: '#fff8f2', onSurface: '#1f1b16', surfaceVariant: '#f2dfd1', onSurfaceVariant: '#51453a', outline: '#837468', bg: 'linear-gradient(135deg, #ffb703 0%, #fd9e02 100%)'
            },
            'synthwave': { 
                primary: '#d500f9', onPrimary: '#3d0047', primaryContainer: '#570064', onPrimaryContainer: '#f5d6ff', secondary: '#dfb8ff', onSecondary: '#451a5f', secondaryContainer: '#5d3377', onSecondaryContainer: '#f2daff', tertiary: '#86fff7', onTertiary: '#003733', tertiaryContainer: '#00504a', onTertiaryContainer: '#a0f1ea', surface: '#1a1a1a', onSurface: '#e1e1e1', surfaceVariant: '#49454f', onSurfaceVariant: '#cac4d0', outline: '#948f99', bg: 'linear-gradient(135deg, #6a00f4 0%, #a100f2 100%)'
            }
        };

        function toggleThemeSelector(button) {
            const container = button.closest('.theme-toggle-container');
            const themeSelector = container.querySelector('.theme-selector');
            themeSelector.classList.toggle('hidden');
        }

        // Apply theme and hide selector
        function applyTheme(themeName) {
            const theme = themes[themeName];
            const root = document.documentElement;

            Object.keys(theme).forEach(key => {
                const cssVar = `--${key.replace(/([A-Z])/g, '-$1').toLowerCase()}`;
                if (key === 'bg') {
                     root.style.setProperty('--theme-bg', theme[key]);
                } else {
                     root.style.setProperty(cssVar, theme[key]);
                }
            });
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.toggle('active', option.dataset.theme === themeName);
            });
            
            document.querySelectorAll('.theme-selector').forEach(sel => sel.classList.add('hidden'));
            
            localStorage.setItem('selectedTheme', themeName);
        }

        // Set up theme options
        document.querySelectorAll('.theme-option').forEach(option => {
            option.addEventListener('click', (e) => {
                applyTheme(e.currentTarget.dataset.theme);
            });
        });

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('theme-dark');
            const isDark = document.body.classList.contains('theme-dark');
            localStorage.setItem('darkMode', isDark);
            
            document.querySelectorAll('.toggle-dark-mode i').forEach(icon => {
                icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
            });
        }

        // Startup Animation
        window.addEventListener('load', () => {
            const startupDiv = document.getElementById('startup-animation');
            const cube = document.querySelector('.cube');

            // Load saved preferences
            const savedTheme = localStorage.getItem('selectedTheme') || 'cosmic-pink';
            applyTheme(savedTheme);
            
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('theme-dark');
                document.querySelectorAll('.toggle-dark-mode i').forEach(icon => {
                    icon.className = 'fas fa-sun';
                });
            }

            // After a delay, trigger the unfolding animation
            setTimeout(() => {
                cube.classList.add('unfold');

                // After the cube unfolds, hide it and show the main menu
                setTimeout(() => {
                    startupDiv.style.opacity = '0';
                    showPage('page1');
                    setTimeout(() => startupDiv.style.display = 'none', 1000);
                }, 1200);
            }, 2500);
        });

        // Navigation
        function showPage(id){
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        
        function goMenu(){ 
            showPage('page1'); 
        }

        function openCalculator() {
            alert("Scientific Calculator feature would be implemented here!");
        }

        // History management
        let conversionHistory = JSON.parse(localStorage.getItem('conversionHistory')) || [];

        function addToHistory(conversion) {
            conversionHistory.unshift({ ...conversion, timestamp: new Date().toLocaleString() });
            conversionHistory = conversionHistory.slice(0, 10);
            localStorage.setItem('conversionHistory', JSON.stringify(conversionHistory));
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = conversionHistory.length === 0 ? '<div class="history-item">No conversion history yet</div>' : 
                conversionHistory.map(item => `
                    <div class="history-item">
                        <div class="conversion-text">${item.value} ${item.from} = ${item.result} ${item.to}</div>
                        <div class="conversion-date">${item.timestamp}</div>
                    </div>`).join('');
        }

        function clearHistory() {
            if (confirm("Are you sure you want to clear all conversion history?")) {
                conversionHistory = [];
                localStorage.setItem('conversionHistory', '[]');
                updateHistoryDisplay();
            }
        }

        function openConverter(type){
            showPage('page2');
            document.getElementById('conv-title').innerText = type + ' Converter';
            loadUnits(type);
            updateHistoryDisplay();
        }

        // Units
        const units = {
            Length: {'Millimeter (mm)': 1, 'Centimeter (cm)': 10, 'Meter (m)': 1000, 'Kilometer (km)': 1000000, 'Inch (in)': 25.4, 'Foot (ft)': 304.8, 'Yard (yd)': 914.4, 'Mile (mi)': 1609344},
            Area: {'Square millimeter (mm²)': 1, 'Square centimeter (cm²)': 100, 'Square meter (m²)': 1000000, 'Square kilometer (km²)': 1e12, 'Square inch (in²)': 645.16, 'Square foot (ft²)': 92903, 'Square yard (yd²)': 836127, 'Acre': 4046860000, 'Hectare (ha)': 10000000000},
            Volume: {'Milliliter (mL)': 1, 'Liter (L)': 1000, 'Cubic centimeter (cm³)': 1, 'Cubic meter (m³)': 1e6, 'Cubic inch (in³)': 16.387, 'Cubic foot (ft³)': 28316.8, 'US Gallon (gal)': 3785.41, 'US Pint (pt)': 473.176},
            Mass: {'Milligram (mg)': 0.001, 'Gram (g)': 1, 'Kilogram (kg)': 1000, 'Tonne (t)': 1e6, 'Ounce (oz)': 28.3495, 'Pound (lb)': 453.592, 'Stone (st)': 6350.29},
            Temperature: ['Celsius', 'Fahrenheit', 'Kelvin'],
            Speed: {'Meters per second (m/s)': 1, 'Kilometers per hour (km/h)': 0.277778, 'Miles per hour (mph)': 0.44704, 'Knots (kn)': 0.514444, 'Feet per second (ft/s)': 0.3048},
            Pressure: {'Pascal (Pa)': 1, 'Kilopascal (kPa)': 1000, 'Bar': 100000, 'Atmosphere (atm)': 101325, 'Millimeters of mercury (mmHg)': 133.322, 'Pounds per square inch (psi)': 6894.76},
            Power: {'Watt (W)': 1, 'Kilowatt (kW)': 1000, 'Megawatt (MW)': 1e6, 'Horsepower (hp)': 745.7, 'Calorie per second (cal/s)': 4.184}
        };

        function loadUnits(type){
            const from = document.getElementById('conv-from');
            const to = document.getElementById('conv-to');
            from.innerHTML = '';
            to.innerHTML = '';
            const unitList = Array.isArray(units[type]) ? units[type] : Object.keys(units[type]);
            
            unitList.forEach(u => {
                from.innerHTML += `<option value="${u}">${u}</option>`;
                to.innerHTML += `<option value="${u}">${u}</option>`;
            });

            if (to.options.length > 1) to.selectedIndex = 1;
            
            document.getElementById('conv-input').value = '';
            document.getElementById('conv-output').value = '';
        }

        // Conversion Logic
        function convert(){
            const inputEl = document.getElementById('conv-input');
            const outputEl = document.getElementById('conv-output');
            const from = document.getElementById('conv-from').value;
            const to = document.getElementById('conv-to').value;
            const type = document.getElementById('conv-title').innerText.replace(' Converter', '');
            
            if (inputEl.value === "") { outputEl.value = ""; return; }
            
            const val = parseFloat(inputEl.value);
            if(isNaN(val)) return;

            let result;
            if(type === 'Temperature'){
                if (from === to) result = val;
                else if (from === 'Celsius') result = (to === 'Fahrenheit') ? (val * 9/5) + 32 : val + 273.15;
                else if (from === 'Fahrenheit') result = (to === 'Celsius') ? (val - 32) * 5/9 : ((val - 32) * 5/9) + 273.15;
                else result = (to === 'Celsius') ? val - 273.15 : (val - 273.15) * 9/5 + 32;
            } else {
                result = val * units[type][from] / units[type][to];
            }
            
            const formattedResult = parseFloat(result.toPrecision(8));
            outputEl.value = formattedResult;
            
            if (inputEl.value && from && to) {
                addToHistory({type: type, value: inputEl.value, from: from, to: to, result: formattedResult});
            }
        }
        
        ['conv-input', 'conv-from', 'conv-to'].forEach(id => {
            document.getElementById(id).addEventListener(id === 'conv-input' ? 'input' : 'change', convert);
        });

    </script>
</body>
</html>
