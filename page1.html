<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="Chronofocus.png" type="image/x-icon">
<title>Chrono Focus - Zenith 2 Ultra Edition</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
    /* --- Liquid Glass Default --- */
    --background: #0a0a1a;
    --surface: rgba(20, 20, 40, 0.6);
    --primary: #8A2BE2;
    --primary-rgb: 138, 43, 226;
    --primary-light: rgba(138, 43, 226, 0.15);
    --secondary: #00FFFF;
    --text-primary: #E6E0FF;
    --text-secondary: #9E93B3;
    --border-color: rgba(138, 43, 226, 0.3);
    
    /* --- ENHANCED: Increased roundness for a softer, modern feel --- */
    --border-radius: 28px;
    --icon-radius: 50%; /* Default to rounded icons */
    --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    
    /* --- ENHANCED: Stronger, more vibrant shadows and glows --- */
    --shadow-sm: 0 4px 20px rgba(var(--primary-rgb), 0.15);
    --shadow-md: 0 8px 35px rgba(var(--primary-rgb), 0.25);
    --shadow-lg: 0 12px 45px rgba(var(--primary-rgb), 0.35);
    --glow-primary: 0 0 20px rgba(var(--primary-rgb), 0.7);
    --glow-secondary: 0 0 20px rgba(0, 255, 255, 0.5);

    /* Task Colors */
    --task-color-red: #F44336;
    --task-color-blue: #2196F3;
    --task-color-green: #4CAF50;
    --task-color-yellow: #FFC107;
    --task-color-purple: #9C27B0;
    --task-color-orange: #FF5722;
    
    /* Haptics */
    --haptics-enabled: 1;
}

/* --- LIQUID GLASS THEME --- */
body {
    background: linear-gradient(135deg, #0a0a1a, #4B0082, #8A2BE2);
    background-attachment: fixed;
    color: var(--text-primary);
    min-height: 100vh;
    padding: 40px;
    overflow-x: hidden;
    transition: background-color 0.5s ease;
    position: relative;
}

/* Enhanced background particles */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(0, 207, 232, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(255, 0, 255, 0.08) 0%, transparent 50%);
    z-index: -1;
    animation: particleFloat 20s ease-in-out infinite;
}

@keyframes particleFloat {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-20px) scale(1.05); }
}

/* Enhanced Liquid Glass Effect */
.liquid-glass {
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* --- THEME PALETTES --- */
/* Liquid Glass Themes */
body.theme-liquid-glass-zenith { --background: #0a0a1a; --surface: rgba(20, 20, 40, 0.6); --primary: #8A2BE2; --primary-rgb: 138, 43, 226; --primary-light: rgba(138, 43, 226, 0.15); --secondary: #00FFFF; --text-primary: #E6E0FF; --text-secondary: #9E93B3; --border-color: rgba(138, 43, 226, 0.3); background: linear-gradient(135deg, #0a0a1a, #4B0082, #8A2BE2); }
body.theme-liquid-glass-cyber { --background: #0a0f1a; --surface: rgba(15, 20, 35, 0.6); --primary: #00FF9D; --primary-rgb: 0, 255, 157; --primary-light: rgba(0, 255, 157, 0.15); --secondary: #FF00FF; --text-primary: #E0F5FF; --text-secondary: #A0B8D0; --border-color: rgba(0, 255, 157, 0.3); background: linear-gradient(135deg, #0a0f1a, #003366, #00FF9D); }
body.theme-liquid-glass-solar { --background: #1a0f0f; --surface: rgba(35, 20, 20, 0.6); --primary: #FF5722; --primary-rgb: 255, 87, 34; --primary-light: rgba(255, 87, 34, 0.15); --secondary: #FFEB3B; --text-primary: #FFEBEE; --text-secondary: #E1BEE7; --border-color: rgba(255, 87, 34, 0.3); background: linear-gradient(135deg, #1a0f0f, #8B0000, #FF5722); }
body.theme-liquid-glass-sapphire { --background: #1a1a2e; --surface: rgba(37, 40, 61, 0.6); --primary: #82aaff; --primary-rgb: 130, 170, 255; --primary-light: rgba(130, 170, 255, 0.15); --secondary: #c792ea; --text-primary: #e0fbfc; --text-secondary: #8d98bd; --border-color: rgba(130, 170, 255, 0.3); background: linear-gradient(135deg, #1a1a2e, #162238); }
body.theme-liquid-glass-emerald { --background: #0f2027; --surface: rgba(34, 53, 61, 0.6); --primary: #2ed573; --primary-rgb: 46, 213, 115; --primary-light: rgba(46, 213, 115, 0.15); --secondary: #1e90ff; --text-primary: #f1f2f6; --text-secondary: #a4b0be; --border-color: rgba(46, 213, 115, 0.3); background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); }
body.theme-liquid-glass-amethyst { --background: #23074d; --surface: rgba(56, 36, 92, 0.6); --primary: #c84e89; --primary-rgb: 200, 78, 137; --primary-light: rgba(200, 78, 137, 0.15); --secondary: #f15f79; --text-primary: #fdeff9; --text-secondary: #d3bccc; --border-color: rgba(200, 78, 137, 0.3); background: linear-gradient(135deg, #23074d, #4c2c72); }
body.theme-liquid-glass-ruby { --background: #3c1053; --surface: rgba(69, 36, 92, 0.6); --primary: #ff0099; --primary-rgb: 255, 0, 153; --primary-light: rgba(255, 0, 153, 0.15); --secondary: #e65c00; --text-primary: #fff0f5; --text-secondary: #e8d9e2; --border-color: rgba(255, 0, 153, 0.3); background: linear-gradient(135deg, #3c1053, #ad5389); }
body.theme-liquid-glass-topaz { --background: #141e30; --surface: rgba(36, 49, 74, 0.6); --primary: #f2994a; --primary-rgb: 242, 153, 74; --primary-light: rgba(242, 153, 74, 0.15); --secondary: #f2c94c; --text-primary: #fcf9f4; --text-secondary: #d3c7b6; --border-color: rgba(242, 153, 74, 0.3); background: linear-gradient(135deg, #141e30, #243b55); }
body.theme-liquid-glass-pearl { --background: #1a1a2e; --surface: rgba(255, 255, 255, 0.1); --primary: #ffffff; --primary-rgb: 255, 255, 255; --primary-light: rgba(255, 255, 255, 0.15); --secondary: #e0e0e0; --text-primary: #ffffff; --text-secondary: #b0b0b0; --border-color: rgba(255, 255, 255, 0.2); background: linear-gradient(135deg, #1a1a2e, #2d2d4e, #3a3a5e); }
body.theme-liquid-glass-obsidian { --background: #000000; --surface: rgba(20, 20, 20, 0.7); --primary: #00ffcc; --primary-rgb: 0, 255, 204; --primary-light: rgba(0, 255, 204, 0.15); --secondary: #ff3366; --text-primary: #ffffff; --text-secondary: #cccccc; --border-color: rgba(0, 255, 204, 0.3); background: linear-gradient(135deg, #000000, #1a1a1a, #2a2a2a); }
body.theme-liquid-glass-rose { --background: #2d1b2e; --surface: rgba(70, 40, 72, 0.6); --primary: #ff6b9d; --primary-rgb: 255, 107, 157; --primary-light: rgba(255, 107, 157, 0.15); --secondary: #ffcc00; --text-primary: #ffe6f2; --text-secondary: #d9b3cc; --border-color: rgba(255, 107, 157, 0.3); background: linear-gradient(135deg, #2d1b2e, #4a2a4c, #6a3a6c); }
body.theme-liquid-glass-ocean { --background: #001f3f; --surface: rgba(0, 50, 100, 0.6); --primary: #7fdbff; --primary-rgb: 127, 219, 255; --primary-light: rgba(127, 219, 255, 0.15); --secondary: #39cccc; --text-primary: #e6f7ff; --text-secondary: #a3d5f7; --border-color: rgba(127, 219, 255, 0.3); background: linear-gradient(135deg, #001f3f, #003366, #004080); }
body.theme-liquid-glass-mint { --background: #003320; --surface: rgba(0, 80, 40, 0.6); --primary: #2ecc71; --primary-rgb: 46, 204, 113; --primary-light: rgba(46, 204, 113, 0.15); --secondary: #1abc9c; --text-primary: #e8f8f5; --text-secondary: #a3e4d7; --border-color: rgba(46, 204, 113, 0.3); background: linear-gradient(135deg, #003320, #004d26, #006633); }
body.theme-liquid-glass-gold { --background: #332600; --surface: rgba(80, 60, 0, 0.6); --primary: #ffd700; --primary-rgb: 255, 215, 0; --primary-light: rgba(255, 215, 0, 0.15); --secondary: #ffaa00; --text-primary: #fff9e6; --text-secondary: #e6d9b3; --border-color: rgba(255, 215, 0, 0.3); background: linear-gradient(135deg, #332600, #4d3800, #664400); }
body.theme-liquid-glass-silver { --background: #1a1a1a; --surface: rgba(60, 60, 60, 0.6); --primary: #c0c0c0; --primary-rgb: 192, 192, 192; --primary-light: rgba(192, 192, 192, 0.15); --secondary: #e0e0e0; --text-primary: #f0f0f0; --text-secondary: #b0b0b0; --border-color: rgba(192, 192, 192, 0.3); background: linear-gradient(135deg, #1a1a1a, #2a2a2a, #3a3a3a); }

/* This is the key style for the glass effect. It applies to any theme class that STARTS with "theme-liquid-glass" */
[class*="theme-liquid-glass"] .section,
[class*="theme-liquid-glass"] .dock-button,
[class*="theme-liquid-glass"] .theme-modal-content,
[class*="theme-liquid-glass"] .app-header,
[class*="theme-liquid-glass"] .app-footer {
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* Enhanced Icon shape customization */
body.icons-rounded .dock-button i,
body.icons-rounded .task-icon,
body.icons-rounded .pomodoro-controls button,
body.icons-rounded .calendar-nav button,
body.icons-rounded .theme-fab {
    border-radius: 50%;
}

body.icons-squared .dock-button i,
body.icons-squared .task-icon,
body.icons-squared .pomodoro-controls button,
body.icons-squared .calendar-nav button,
body.icons-squared .theme-fab {
    border-radius: 25%;
}

body.icons-default .dock-button i,
body.icons-default .task-icon,
body.icons-default .pomodoro-controls button,
body.icons-default .calendar-nav button,
body.icons-default .theme-fab {
    border-radius: var(--icon-radius);
}

/* --- GLOBAL & ENHANCED LAYOUT --- */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }

/* Enhanced: A wider, centered main container with a sophisticated grid layout on larger screens */
.app {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: 40px; /* Increased gap for better spacing */
}

.app > * { 
    opacity: 0; 
    transform: translateY(30px); 
    animation: sweetFadeIn 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; 
}

/* Staggered animation */
.app-header { animation-delay: 0.1s; }
.main-dock { animation-delay: 0.2s; }
.task-section { animation-delay: 0.3s; }
.content-grid { animation-delay: 0.4s; }
.app-footer { animation-delay: 0.6s; }

.app-header { 
    text-align: center; 
    margin-bottom: 20px; 
    padding: 50px 20px;
    border-radius: var(--border-radius);
    position: relative;
    overflow: hidden;
}
.app-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.1), transparent 70%);
    z-index: -1;
}
.app-header h1 { 
    font-size: 3.8rem; 
    font-weight: 700; 
    color: var(--text-primary); 
    letter-spacing: -2px; 
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent; 
    background-clip: text;
    margin-bottom: 10px;
    text-shadow: 0 0 30px rgba(var(--primary-rgb), 0.5);
    filter: drop-shadow(0 0 10px rgba(var(--primary-rgb), 0.3));
}
.app-header p { 
    color: var(--text-secondary); 
    font-size: 1.35rem; 
    margin-top: 5px; 
    font-weight: 500;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

/* Enhanced: A grid for secondary sections to sit side-by-side on desktop */
.content-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 40px;
}

/* On screens wider than 900px, create a two-column layout */
@media (min-width: 900px) {
    .content-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Enhanced Dock Navigation */
.main-dock {
    display: grid;
    /* ENHANCED: Dock now gracefully adapts to 4 items */
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 30px;
}
.dock-button { 
    padding: 35px; 
    border-radius: var(--border-radius); 
    text-align: center; 
    transition: var(--transition); 
    box-shadow: var(--shadow-sm); 
    cursor: pointer; 
    color: var(--text-primary); 
    text-decoration: none; 
    position: relative; 
    overflow: hidden;
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
}
.dock-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
    transition: left 0.7s ease;
}
.dock-button:hover::before {
    left: 100%;
}
.dock-button:hover { 
    transform: translateY(-12px) scale(1.03); 
    box-shadow: 
        0 25px 50px rgba(var(--primary-rgb), 0.3),
        0 0 0 1px rgba(var(--primary-rgb), 0.15);
}
.dock-button i { 
    font-size: 2.8rem; 
    margin-bottom: 20px; 
    color: var(--primary); 
    background: rgba(var(--primary-rgb), 0.15);
    width: 80px; 
    height: 80px; 
    border-radius: var(--icon-radius); 
    display: inline-flex; 
    align-items: center; 
    justify-content: center; 
    transition: var(--transition); 
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 0 10px rgba(var(--primary-rgb), 0.5));
}
.dock-button:hover i { 
    transform: scale(1.15) rotate(-5deg); 
    background: rgba(var(--primary-rgb), 0.25);
    box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.7); 
    filter: drop-shadow(0 0 15px rgba(var(--primary-rgb), 0.8));
}
.dock-button h2 { 
    font-size: 1.3rem; 
    font-weight: 600; 
    margin: 0; 
    position: relative; 
    z-index: 1;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}
.dock-button p { 
    font-size: 1rem; 
    color: var(--text-secondary); 
    position: relative; 
    z-index: 1;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* Enhanced Glow Effect */
.study-tools { 
    animation: pulseGlow 2.5s infinite ease-out; 
    position: relative;
}
.study-tools::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: calc(var(--border-radius) + 5px);
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--primary));
    z-index: -1;
    opacity: 0.8;
    filter: blur(20px);
}
@keyframes pulseGlow { 
    0%, 100% { 
        box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.5); 
    } 
    50% { 
        box-shadow: 0 0 40px 15px rgba(var(--primary-rgb), 0.7); 
    } 
}

/* Enhanced Section Styling */
.section { 
    padding: 45px; 
    border-radius: var(--border-radius); 
    transition: var(--transition); 
    position: relative;
    overflow: hidden;
}
.section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.08), transparent 70%);
    z-index: -1;
}
.section-header { 
    display: flex; 
    flex-wrap: wrap; 
    justify-content: space-between; 
    align-items: center; 
    gap: 20px; 
    margin-bottom: 35px; 
}
.section-header h2 { 
    color: var(--text-primary); 
    font-size: 1.9rem; 
    display: flex; 
    align-items: center; 
    gap: 15px; 
    font-weight: 600; 
    margin:0; 
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

/* Enhanced Buttons & Inputs */
button { 
    padding: 16px 28px; 
    background: var(--primary); 
    color: #fff; 
    border: none; 
    border-radius: 20px; 
    cursor: pointer; 
    font-weight: 500; 
    font-size: 1.05rem; 
    transition: var(--transition); 
    display: inline-flex; 
    align-items: center; 
    justify-content: center; 
    gap: 10px; 
    box-shadow: var(--shadow-sm); 
    position: relative;
    overflow: hidden;
    filter: drop-shadow(0 0 5px rgba(var(--primary-rgb), 0.3));
}
button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
    transition: left 0.5s ease;
}
button:hover::before {
    left: 100%;
}
button:hover:not(:disabled) { 
    background: var(--text-primary); 
    box-shadow: var(--shadow-lg); 
    transform: translateY(-5px); 
    filter: drop-shadow(0 0 10px rgba(var(--primary-rgb), 0.5));
}
button:active:not(:disabled) { 
    transform: translateY(-2px) scale(0.98); 
}
button:disabled { 
    opacity: 0.6; 
    cursor: not-allowed; 
}
input, select { 
    padding: 16px 24px; 
    background: rgba(255, 255, 255, 0.08); 
    border: 1px solid var(--border-color); 
    border-radius: 20px; 
    font-size: 1.05rem; 
    color: var(--text-primary); 
    transition: var(--transition); 
    width: 100%; 
    -webkit-appearance: none; 
    appearance: none; 
    backdrop-filter: blur(15px);
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.2));
}
input::placeholder { 
    color: var(--text-secondary); 
}
input:focus, select:focus { 
    border-color: rgba(var(--primary-rgb), 0.6); 
    outline: none; 
    background: rgba(255, 255, 255, 0.12); 
    box-shadow: 0 0 0 5px rgba(var(--primary-rgb), 0.15); 
    filter: drop-shadow(0 0 10px rgba(var(--primary-rgb), 0.2));
}
select { 
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22%239E93B3%22%3E%3Cpath%20d%3D%22M10%2012l-6-6h12l-6%206z%22%2F%3E%3C%2Fsvg%3E'); 
    background-repeat: no-repeat; 
    background-position: right 18px center; 
    background-size: 12px; 
    padding-right: 40px;
}

/* Enhanced Task Manager */
.task-input-form { 
    display: grid; 
    gap: 20px; 
    margin-bottom: 35px; 
    grid-template-columns: 1fr; 
}
.task-main-input { 
    display: grid; 
    grid-template-columns: 1fr auto; 
    gap: 20px; 
}
.task-options { 
    display: grid; 
    grid-template-columns: repeat(3, 1fr); 
    gap: 20px; 
}
.task-filters { 
    display: flex; 
    gap: 15px; 
    flex-wrap: wrap; 
}
.task-filters button { 
    background: none; 
    color: var(--text-secondary); 
    box-shadow: none; 
    padding: 12px 20px; 
    font-weight: 500; 
    border: 1px solid var(--border-color); 
    backdrop-filter: blur(15px);
    filter: none;
}
.task-filters button:hover { 
    background-color: var(--primary-light); 
    color: var(--primary); 
}
.task-filters button.active { 
    background: var(--primary); 
    color: #fff; 
    border-color: var(--primary); 
}
#taskList { 
    list-style-type: none; 
}
#taskList li { 
    display: flex; 
    align-items: center; 
    padding: 20px; 
    border-radius: 22px; 
    margin-bottom: 18px; 
    border: 1px solid var(--border-color); 
    border-left: 8px solid transparent; 
    transition: all 0.4s ease; 
    gap: 20px; 
    background: rgba(var(--primary-rgb), 0.03); 
    overflow: hidden; 
    opacity: 0; 
    backdrop-filter: blur(15px);
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.1));
}
#taskList li { 
    animation: slideFadeIn 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; 
}
#taskList li:nth-child(1) { animation-delay: 0.05s; }
#taskList li:nth-child(2) { animation-delay: 0.1s; }
#taskList li:nth-child(3) { animation-delay: 0.15s; }
#taskList li:nth-child(4) { animation-delay: 0.2s; }
#taskList li:nth-child(5) { animation-delay: 0.25s; }
#taskList li:hover { 
    background: rgba(255, 255, 255, 0.12); 
    border-color: rgba(var(--primary-rgb), 0.4); 
    transform: scale(1.03); 
    box-shadow: var(--shadow-sm); 
}
li.completed { 
    opacity: 0.7; 
    background: transparent; 
}
.completed .task-text { 
    text-decoration: line-through; 
    color: var(--text-secondary); 
}
li.priority-important { 
    background: var(--primary-light); 
    font-weight: 500; 
    border-left-color: var(--warning)!important;
}
.important-star { 
    color: var(--warning); 
    margin-right: 8px; 
    filter: drop-shadow(0 0 5px rgba(255, 193, 7, 0.5));
}
li.deleting { 
    animation: fadeOutShrink 0.5s ease forwards; 
}
.task-content { 
    display: flex; 
    align-items: center; 
    gap: 18px; 
    flex-grow: 1; 
    word-break: break-word; 
}
.task-icon { 
    width: 50px; 
    height: 50px; 
    border-radius: var(--icon-radius); 
    display: inline-flex; 
    align-items: center; 
    justify-content: center; 
    flex-shrink: 0; 
    font-size: 1.4rem; 
    background-color: var(--primary-light); 
    color: var(--primary); 
    transition: var(--transition);
    filter: drop-shadow(0 0 5px rgba(var(--primary-rgb), 0.3));
}
.task-icon:hover {
    transform: scale(1.1) rotate(5deg);
    filter: drop-shadow(0 0 8px rgba(var(--primary-rgb), 0.5));
}
.task-actions { 
    display: flex; 
    gap: 12px; 
    margin-left: auto; 
}
.task-actions button { 
    background: none; 
    box-shadow: none; 
    color: var(--secondary); 
    width: 45px; 
    height: 45px; 
    padding: 0; 
    font-size: 1.2rem; 
    border-radius: 16px; 
    backdrop-filter: blur(15px);
    filter: none;
}
.task-actions .complete-btn:hover { 
    background: rgba(var(--success), 0.15); 
    color: var(--success); 
}
.task-actions .edit-btn:hover { 
    background: var(--primary-light); 
    color: var(--primary); 
}
.task-actions .delete-btn:hover { 
    background: rgba(var(--danger), 0.15); 
    color: var(--danger); 
}

/* Enhanced Calendar */
.calendar-grid { 
    display: grid; 
    grid-template-columns: repeat(7, 1fr); 
    gap: 15px; 
}
.calendar-day-name { 
    font-weight: 600; 
    color: var(--text-secondary); 
    padding: 15px 0; 
    text-align: center; 
    font-size: 0.95em; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}
.calendar-day { 
    height: 55px; 
    border-radius: 20px; 
    cursor: pointer; 
    transition: var(--transition); 
    border: 2px solid transparent; 
    position: relative; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    font-weight: 500; 
    backdrop-filter: blur(15px);
    background: rgba(255, 255, 255, 0.08);
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.1));
}
.calendar-day.other-month { 
    opacity: 0.4; 
    pointer-events: none; 
}
.calendar-day:not(.other-month):hover { 
    background-color: var(--primary-light); 
    transform: scale(1.08); 
}
.calendar-day.today { 
    font-weight: 700; 
    color: var(--primary); 
    border-color: var(--primary); 
    background: rgba(var(--primary-rgb), 0.15);
    filter: drop-shadow(0 0 8px rgba(var(--primary-rgb), 0.3));
}
.calendar-day.selected { 
    background-color: var(--primary); 
    color: #fff; 
    box-shadow: var(--shadow-lg); 
    transform: scale(1.15); 
    filter: drop-shadow(0 0 15px rgba(var(--primary-rgb), 0.5));
}
.calendar-day.has-task::after { 
    content: ''; 
    position: absolute; 
    bottom: 10px; 
    left: 50%; 
    transform: translateX(-50%); 
    width: 8px; 
    height: 8px; 
    border-radius: 50%; 
    background-color: var(--primary); 
    filter: drop-shadow(0 0 3px rgba(var(--primary-rgb), 0.5));
}
.calendar-day.selected.has-task::after { 
    background-color: #fff; 
}
.calendar-nav { 
    display: flex; 
    gap: 8px; 
    align-items: center;
}
#monthYear { 
    margin: 0 12px; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}
.calendar-nav button { 
    padding: 0; 
    width: 42px; 
    height: 42px; 
    border-radius: var(--icon-radius); 
}

/* --- Enhanced Pomodoro Timer --- */
.pomodoro-section { 
    text-align: center; 
}
.pomodoro-modes { 
    display: flex; 
    justify-content: center; 
    gap: 15px; 
    margin-bottom: 25px; 
    flex-wrap: wrap; 
}
.pomodoro-modes button { 
    background: none; 
    color: var(--text-secondary); 
    box-shadow: none; 
    padding: 12px 22px; 
    font-weight: 500; 
    border: 1px solid var(--border-color); 
    backdrop-filter: blur(15px);
    filter: none;
}
.pomodoro-modes button:hover { 
    background-color: var(--primary-light); 
    color: var(--primary); 
}
.pomodoro-modes button.active { 
    background: var(--primary); 
    color: #fff; 
    border-color: var(--primary); 
}
.pomodoro-timer-circle { 
    position: relative; 
    width: 260px; 
    height: 260px; 
    margin: 40px auto; 
    filter: drop-shadow(0 0 20px rgba(var(--primary-rgb), 0.3));
}
.pomodoro-progress-ring { 
    transform: rotate(-90deg); 
}
.pomodoro-progress-ring__track { 
    stroke: var(--border-color); 
}
.pomodoro-progress-ring__progress { 
    stroke: var(--primary); 
    stroke-linecap: round; 
    transition: stroke-dashoffset 0.5s cubic-bezier(0.65, 0, 0.35, 1); 
    filter: drop-shadow(0 0 5px rgba(var(--primary-rgb), 0.5));
}
.pomodoro-timer-display { 
    position: absolute; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    font-size: 4.2rem; 
    font-weight: 600; 
    color: var(--text-primary); 
    margin: 0; 
    letter-spacing: -1.5px; 
    transition: var(--transition); 
    text-shadow: 0 0 15px rgba(var(--primary-rgb), 0.5);
    filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.2));
}
.pomodoro-timer-circle.running .pomodoro-progress-ring__progress { 
    animation: slowPulse 2s infinite ease-in-out; 
}
@keyframes slowPulse { 
    50% { 
        stroke: var(--text-primary); 
    } 
}
.pomodoro-controls { 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    gap: 25px; 
}
.pomodoro-controls button { 
    font-size: 1.4rem; 
    width: 75px; 
    height: 75px; 
    border-radius: var(--icon-radius); 
    padding: 0; 
    box-shadow: var(--shadow-md); 
}
.pomodoro-controls #pomodoro-start-pause i { 
    font-size: 2.2rem; 
}
/* --- End of Enhanced Pomodoro Timer CSS --- */

/* Enhanced Theme Customizer */
.theme-fab { 
    position: fixed; 
    bottom: 35px; 
    right: 35px; 
    width: 70px; 
    height: 70px; 
    background: var(--primary); 
    color: white; 
    border-radius: var(--icon-radius); 
    border: none; 
    font-size: 1.8rem; 
    cursor: pointer; 
    z-index: 1000; 
    box-shadow: var(--shadow-lg); 
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    backdrop-filter: blur(25px);
    filter: drop-shadow(0 0 15px rgba(var(--primary-rgb), 0.5));
}
.theme-fab:hover { 
    transform: scale(1.15) rotate(25deg); 
    box-shadow: 0 15px 40px rgba(var(--primary-rgb), 0.7); 
    filter: drop-shadow(0 0 20px rgba(var(--primary-rgb), 0.7));
}
.theme-modal { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background: rgba(0,0,0,0.6); 
    backdrop-filter: blur(15px); 
    z-index: 1001; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    opacity: 0; 
    visibility: hidden; 
    transition: opacity 0.4s ease, visibility 0.4s ease; 
}
.theme-modal.visible { 
    opacity: 1; 
    visibility: visible; 
}
.theme-modal-content { 
    padding: 40px; 
    border-radius: var(--border-radius); 
    width: 90%; 
    max-width: 900px; 
    transform: scale(0.9) translateY(20px); 
    transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); 
    position: relative; 
    max-height: 85vh; 
    overflow-y: auto; 
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    filter: drop-shadow(0 0 30px rgba(0, 0, 0, 0.3));
}
.theme-modal.visible .theme-modal-content { 
    transform: scale(1) translateY(0); 
}
.theme-modal-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 30px; 
}
.theme-modal-header h2 { 
    font-weight: 600; 
    color: var(--text-primary); 
    font-size: 1.6rem;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}
.close-modal-btn { 
    background: none; 
    border: none; 
    font-size: 2rem; 
    color: var(--text-secondary); 
    cursor: pointer; 
    padding: 5px; 
    box-shadow: none; 
    line-height: 1; 
    transition: var(--transition);
    filter: none;
}
.close-modal-btn:hover {
    color: var(--primary);
    transform: scale(1.15);
}
.theme-group h3 { 
    font-size: 1.3rem; 
    font-weight: 500; 
    color: var(--text-secondary); 
    margin: 35px 0 20px; 
    text-align: left; 
    border-bottom: 1px solid var(--border-color); 
    padding-bottom: 15px; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}
.theme-palette { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); 
    gap: 20px; 
}
.theme-card { 
    cursor: pointer; 
    text-align: center; 
    transition: transform 0.3s ease; 
}
.theme-card:hover { 
    transform: translateY(-8px); 
}
.theme-card-swatch { 
    width: 100%; 
    height: 75px; 
    border-radius: 22px; 
    transition: var(--transition); 
    border: 3px solid transparent; 
    position: relative; 
    background-clip: padding-box; 
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.2));
}
.theme-card-swatch.active { 
    border-color: var(--primary); 
    transform: scale(1.08); 
    box-shadow: var(--shadow-lg); 
    filter: drop-shadow(0 0 15px rgba(var(--primary-rgb), 0.5));
}
.theme-card-swatch.active::after { 
    content: '\f00c'; 
    font-family: 'Font Awesome 6 Free'; 
    font-weight: 900; 
    position: absolute; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    color: white; 
    font-size: 1.8rem; 
    text-shadow: 0 0 15px rgba(0,0,0,0.8); 
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
}
.theme-card span { 
    font-size: 1rem; 
    color: var(--text-primary); 
    font-weight: 500; 
    margin-top: 15px; 
    display: block; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* Enhanced Settings Panel */
.settings-panel { 
    margin-top: 35px; 
    padding-top: 25px; 
    border-top: 1px solid var(--border-color); 
}
.settings-group { 
    margin-bottom: 30px; 
}
.settings-group h3 { 
    font-size: 1.3rem; 
    font-weight: 500; 
    color: var(--text-primary); 
    margin-bottom: 18px; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}
.settings-options { 
    display: flex; 
    gap: 18px; 
    flex-wrap: wrap; 
}
.settings-option { 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    cursor: pointer; 
}
.settings-option input { 
    width: auto; 
}
.settings-option label { 
    cursor: pointer; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* Enhanced Footer */
.app-footer { 
    text-align: center; 
    margin-top: 45px; 
    padding: 25px 0; 
    color: var(--text-secondary); 
    border-radius: var(--border-radius);
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
}
.app-footer p { 
    font-weight: 500; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}
.app-footer span { 
    font-weight: 600; 
    background-color: var(--primary-light); 
    color: var(--primary); 
    padding: 6px 14px; 
    border-radius: 14px; 
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    filter: drop-shadow(0 0 5px rgba(var(--primary-rgb), 0.3));
}

/* Enhanced Toast & Animations */
.toast { 
    position: fixed; 
    bottom: 30px; 
    left: 50%; 
    padding: 18px 32px; 
    color: var(--text-primary); 
    border-radius: 20px; 
    box-shadow: var(--shadow-lg); 
    border: 1px solid var(--border-color); 
    transform: translate(-50%, 200%); 
    opacity: 0; 
    transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1); 
    z-index: 1002; 
    font-weight: 500; 
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    background: rgba(255, 255, 255, 0.08);
    filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.3));
}
.toast.show { 
    transform: translate(-50%, 0); 
    opacity: 1; 
}

@keyframes sweetFadeIn { 
    from { 
        opacity: 0; 
        transform: translateY(30px) scale(0.98); 
    } 
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    } 
}
@keyframes slideFadeIn { 
    from { 
        opacity: 0; 
        transform: translateX(-20px); 
    } 
    to { 
        opacity: 1; 
        transform: translateX(0); 
    } 
}
@keyframes fadeOutShrink { 
    from { 
        opacity: 1; 
        transform: scale(1); 
    } 
    to { 
        opacity: 0; 
        transform: scale(0.9); 
        height: 0; 
        padding: 0; 
        margin: 0; 
        border: 0;
    } 
}

/* Enhanced Haptic feedback simulation */
@keyframes hapticPulse { 
    0%, 100% { transform: scale(1); } 
    50% { transform: scale(0.98); } 
}

.haptic-feedback {
    animation: hapticPulse 0.1s ease;
}

/* Enhanced Floating animation for elements */
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
}

.floating {
    animation: float 5s ease-in-out infinite;
}

/* --- ENHANCED RESPONSIVE: FOR MOBILE --- */
@media (max-width: 768px) {
  body { padding: 25px; }
  .app { gap: 30px; }
  .app-header h1 { font-size: 2.8rem; letter-spacing: -1px;}
  .app-header p { font-size: 1.2rem; }
  .section { padding: 30px; }
  .section-header { flex-direction: column; align-items: flex-start; gap: 12px; margin-bottom: 25px; }
  .section-header h2 { font-size: 1.6rem; }

  /* Dock Navigation optimized for mobile */
  .main-dock { grid-template-columns: repeat(2, 1fr); gap: 20px; }
  .dock-button { padding: 25px 18px; }
  .dock-button i { font-size: 2.2rem; width: 60px; height: 60px; margin-bottom: 15px; }
  .dock-button h2 { font-size: 1.1rem; }
  .dock-button p { font-size: 0.9rem; }
 
  /* Task Section Compact Layout */
  .task-main-input { grid-template-columns: 1fr; }
  .task-options { grid-template-columns: 1fr; }
  button, input, select { font-size: 1rem; }
  #taskList li { padding: 18px; gap: 15px; border-radius: 18px; flex-direction: column; align-items: stretch; }
  .task-content { flex-direction: row; }
  .task-actions { margin-left: 0; justify-content: flex-end; }

  .task-icon { width: 42px; height: 42px; font-size: 1.2rem; border-radius: 14px;}
  .task-actions button { width: 40px; height: 40px; font-size: 1rem; }
 
  /* Calendar Compact Layout */
  .calendar-grid { gap: 8px; }
  .calendar-day-name { font-size: 0.85em; padding: 10px 0; }
  .calendar-day { height: 46px; font-size: 0.95rem; border-radius: 16px;}
  .calendar-day.has-task::after { width: 6px; height: 6px; bottom: 7px;}

  /* Pomodoro Timer smaller elements */
  .pomodoro-timer-circle { width: 220px; height: 220px; margin: 30px auto; }
  .pomodoro-progress-ring { width: 220px; height: 220px; }
  .pomodoro-progress-ring circle { r: 100; cx: 110; cy: 110; }
  .pomodoro-timer-display { font-size: 3.5rem; }
  .pomodoro-controls button { width: 65px; height: 65px; }
  .pomodoro-controls #pomodoro-start-pause i { font-size: 1.8rem; }
  .pomodoro-modes button { padding: 10px 18px; font-size: 0.95em; }

  /* Floating button adjustment */
  .theme-fab { bottom: 25px; right: 25px; width: 65px; height: 65px; }

  /* Theme Modal compact view */
  .theme-modal-content { padding: 25px; }
  .theme-palette { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 15px; }
  .theme-card-swatch { height: 60px; }
}


@media (max-width: 480px) {
  body { padding: 20px; }
  .app-header h1 { font-size: 2.5rem; }
  .app-header p { font-size: 1.1rem; }

  .task-filters { gap: 10px; justify-content: center; }
  .task-filters button { padding: 10px 15px; font-size: 0.95rem; }
  .section-header h2 { font-size: 1.4rem; gap: 12px; }

  .calendar-grid { gap: 5px; }
  .calendar-day { height: 42px; font-size: 0.9rem; border-radius: 14px; border-width: 1.5px; }

  .pomodoro-timer-circle { width: 200px; height: 200px; }
  .pomodoro-progress-ring { width: 200px; height: 200px; }
  .pomodoro-progress-ring circle { r: 90; cx: 100; cy: 100; }
  .pomodoro-timer-display { font-size: 3.2rem; }
  
  #taskInput, #addTaskBtn, .task-options select { padding-top: 14px; padding-bottom: 14px; }
}
</style>
</head>
<body class="icons-default theme-liquid-glass-zenith">

<div class="app">

    <header class="app-header liquid-glass">
        <h1>Chrono Focus</h1>
        <p>Your calm and cozy productivity partner.</p>
    </header>

    <nav class="main-dock">
        <a href="page16.html" class="dock-button liquid-glass">
            <i class="fa-solid fa-list-check"></i>
            <div>
                <h2>Task Manager</h2>
                <p>Organize Your Day</p>
            </div>
        </a>
        <a href="page2.html" class="dock-button study-tools liquid-glass">
            <i class="fa-solid fa-book-open-reader"></i>
            <div>
                <h2>Study Materials</h2>
                <p>Tools & Resources</p>
            </div>
        </a>
        <!-- NEW FEATURE: Added the Optichain AI Tools button as requested -->
        <a href="page22.html" class="dock-button liquid-glass">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            <div>
                <h2>Optichain AI Tools</h2>
                <p>Boost Your Workflow</p>
            </div>
        </a>
        <a href="page9.html" class="dock-button liquid-glass">
            <i class="fa-solid fa-brain"></i>
            <div>
                <h2>Deep Focus</h2>
                <p>Zen Mode</p>
            </div>
        </a>
    </nav>

    <section class="section task-section liquid-glass">
        <div class="section-header">
            <h2><i class="fa-solid fa-clipboard-list"></i> Task Manager</h2>
            <div class="task-filters" id="taskFilters">
                <button class="active" data-filter="all">All</button>
                <button data-filter="active">Active</button>
                <button data-filter="completed">Completed</button>
            </div>
        </div>
        <div class="task-input-form">
             <div class="task-main-input">
                <input id="taskInput" type="text" placeholder="e.g., Read a chapter of a book..." autocomplete="off" />
                <button id="addTaskBtn"><i class="fa-solid fa-plus"></i> Add Task</button>
             </div>
             <div class="task-options">
                 <select id="taskIcon" title="Task Category">
                     <option value="fa-solid fa-thumbtack">📌 General</option>
                     <option value="fa-solid fa-book-open">📖 Study</option>
                     <option value="fa-solid fa-briefcase">💼 Work</option>
                     <option value="fa-solid fa-heart-pulse">❤️ Health</option>
                     <option value="fa-solid fa-cart-shopping">🛒 Shopping</option>
                     <option value="fa-solid fa-house-user">🏠 Home</option>
                 </select>
                 <select id="taskPriority" title="Task Priority">
                    <option value="normal">Normal Priority</option>
                    <option value="important">⭐ Very Important</option>
                </select>
                <select id="taskColor" title="Task Color">
                    <option value="default">Default Color</option>
                    <option value="red" style="color:var(--task-color-red)">🔴 Red</option>
                    <option value="blue" style="color:var(--task-color-blue)">🔵 Blue</option>
                    <option value="green" style="color:var(--task-color-green)">🟢 Green</option>
                    <option value="yellow" style="color:var(--task-color-yellow)">🟡 Yellow</option>
                    <option value="purple" style="color:var(--task-color-purple)">🟣 Purple</option>
                     <option value="orange" style="color:var(--task-color-orange)">🟠 Orange</option>
                </select>
             </div>
        </div>
        <ul id="taskList"></ul>
    </section>

    <!-- ENHANCED: New grid container for the Calendar and Focus Timer -->
    <div class="content-grid">
        <section class="section calendar-section liquid-glass">
            <div class="section-header">
                <h2><i class="fa-solid fa-calendar-days"></i> Calendar</h2>
                <div class="calendar-nav">
                    <button id="prevMonthBtn" aria-label="Previous month"><i class="fa-solid fa-chevron-left"></i></button>
                    <h3 id="monthYear"></h3>
                    <button id="nextMonthBtn" aria-label="Next month"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>
            <div class="calendar-grid" id="dayNames"></div>
            <div class="calendar-grid" id="calendarGrid"></div>
        </section>

        <section class="section pomodoro-section liquid-glass">
            <div class="section-header" style="justify-content: center;">
                <h2><i class="fa-solid fa-clock"></i> Focus Timer</h2>
            </div>
            <div class="pomodoro-modes" id="pomodoro-modes">
                <button class="active" data-mode="pomodoro">Pomodoro</button>
                <button data-mode="shortBreak">Short Break</button>
                <button data-mode="longBreak">Long Break</button>
            </div>
            
            <div class="pomodoro-timer-circle">
                <svg class="pomodoro-progress-ring" width="260" height="260">
                    <circle class="pomodoro-progress-ring__track" stroke-width="10" fill="transparent" r="120" cx="130" cy="130"/>
                    <circle class="pomodoro-progress-ring__progress" stroke-width="10" fill="transparent" r="120" cx="130" cy="130"/>
                </svg>
                <div id="pomodoro-timer-display" class="pomodoro-timer-display">25:00</div>
            </div>
            
            <div class="pomodoro-controls">
                <button id="pomodoro-start-pause" aria-label="Start or pause the timer"><i class="fa-solid fa-play"></i></button>
                <button id="pomodoro-reset" aria-label="Reset the timer"><i class="fa-solid fa-rotate-right"></i></button>
            </div>
        </section>
    </div>
   
    <footer class="app-footer liquid-glass">
        <p>Your journey to focus begins now.</p>
        <span>Zenith 2 Ultra - Beta 8</span>
    </footer>

</div>

<!-- Enhanced Theme Customizer FAB and Modal -->
<button id="theme-fab" class="theme-fab" aria-label="Customize Theme">
    <i class="fa-solid fa-palette"></i>
</button>

<div id="themeModal" class="theme-modal" role="dialog" aria-modal="true" aria-labelledby="theme-modal-title">
    <div class="theme-modal-content liquid-glass">
        <div class="theme-modal-header">
            <h2 id="theme-modal-title">Customize Your Experience</h2>
            <button class="close-modal-btn" aria-label="Close theme selector">&times;</button>
        </div>
        <div id="theme-modal-body"></div>
        <div class="settings-panel">
            <div class="settings-group">
                <h3>Icon Style</h3>
                <div class="settings-options">
                    <div class="settings-option">
                        <input type="radio" id="icon-default" name="icon-style" value="default" checked>
                        <label for="icon-default">Default</label>
                    </div>
                    <div class="settings-option">
                        <input type="radio" id="icon-rounded" name="icon-style" value="rounded">
                        <label for="icon-rounded">Rounded</label>
                    </div>
                    <div class="settings-option">
                        <input type="radio" id="icon-squared" name="icon-style" value="squared">
                        <label for="icon-squared">Squared</label>
                    </div>
                </div>
            </div>
            <div class="settings-group">
                <h3>Haptic Feedback</h3>
                <div class="settings-options">
                    <div class="settings-option">
                        <input type="checkbox" id="haptics-enabled" checked>
                        <label for="haptics-enabled">Enable Haptic Feedback</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="toast" class="toast liquid-glass"></div>

<script>
class ChronoFocusApp {
    constructor() {
        // --- CACHE DOM ELEMENTS ---
        this.dom = {
            taskInput: document.getElementById('taskInput'),
            addTaskBtn: document.getElementById('addTaskBtn'),
            taskList: document.getElementById('taskList'),
            taskFilters: document.getElementById('taskFilters'),
            taskIcon: document.getElementById('taskIcon'),
            taskPriority: document.getElementById('taskPriority'),
            taskColor: document.getElementById('taskColor'),
            calendarGrid: document.getElementById('calendarGrid'),
            dayNames: document.getElementById('dayNames'),
            monthYear: document.getElementById('monthYear'),
            prevMonthBtn: document.getElementById('prevMonthBtn'),
            nextMonthBtn: document.getElementById('nextMonthBtn'),
            pomodoroDisplay: document.getElementById('pomodoro-timer-display'),
            pomodoroCircle: document.querySelector('.pomodoro-timer-circle'),
            progressRing: document.querySelector('.pomodoro-progress-ring__progress'),
            pomodoroStartPause: document.getElementById('pomodoro-start-pause'),
            pomodoroReset: document.getElementById('pomodoro-reset'),
            pomodoroModes: document.getElementById('pomodoro-modes'),
            themeFab: document.getElementById('theme-fab'),
            themeModal: document.getElementById('themeModal'),
            themeModalBody: document.getElementById('theme-modal-body'),
            toast: document.getElementById('toast'),
            iconStyleInputs: document.querySelectorAll('input[name="icon-style"]'),
            hapticsInput: document.getElementById('haptics-enabled')
        };

        if (this.dom.progressRing) {
            this.radius = this.dom.progressRing.r.baseVal.value;
            this.circumference = this.radius * 2 * Math.PI;
            this.dom.progressRing.style.strokeDasharray = `${this.circumference} ${this.circumference}`;
            this.dom.progressRing.style.strokeDashoffset = this.circumference;
        }

        // --- APPLICATION STATE ---
        this.state = {
            currentFilter: 'all',
            currentDate: new Date(),
            selectedDate: null,
            pomodoro: {
                timerId: null,
                mode: 'pomodoro',
                timeRemaining: 25 * 60,
                isRunning: false,
                modes: { pomodoro: 25 * 60, shortBreak: 5 * 60, longBreak: 15 * 60 }
            },
            hapticsEnabled: true
        };

        this.finishSound = new Audio('https://cdn.jsdelivr.net/gh/k-fari/sounds/notification.mp3');
    }

    // --- INITIALIZATION ---
    init() {
        this.ThemeManager.init(this);
        this.setupEventListeners();
        this.renderDayNames();
        this.renderCalendar();
        this.loadTasks();
        this.updatePomodoroDisplay();
        this.loadSettings();
        console.log("Chrono Focus Zenith 2 Ultra Beta 8 Initialized!");
    }
   
    // --- THEME MANAGEMENT ---
    ThemeManager = {
        themes: [
            // Liquid Glass Themes
            { id: 'theme-liquid-glass-zenith', name: 'Zenith Glass', gradient: 'linear-gradient(135deg, #0a0a1a, #4B0082, #8A2BE2)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-cyber', name: 'Cyber Glass', gradient: 'linear-gradient(135deg, #0a0f1a, #003366, #00FF9D)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-solar', name: 'Solar Glass', gradient: 'linear-gradient(135deg, #1a0f0f, #8B0000, #FF5722)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-sapphire', name: 'Sapphire Glass', gradient: 'linear-gradient(135deg, #1a1a2e, #162238)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-emerald', name: 'Emerald Glass', gradient: 'linear-gradient(135deg, #0f2027, #203a43, #2c5364)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-amethyst', name: 'Amethyst Glass', gradient: 'linear-gradient(135deg, #23074d, #4c2c72)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-ruby', name: 'Ruby Glass', gradient: 'linear-gradient(135deg, #3c1053, #ad5389)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-topaz', name: 'Topaz Glass', gradient: 'linear-gradient(135deg, #141e30, #243b55)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-pearl', name: 'Pearl Glass', gradient: 'linear-gradient(135deg, #1a1a2e, #2d2d4e, #3a3a5e)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-obsidian', name: 'Obsidian Glass', gradient: 'linear-gradient(135deg, #000000, #1a1a1a, #2a2a2a)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-rose', name: 'Rose Glass', gradient: 'linear-gradient(135deg, #2d1b2e, #4a2a4c, #6a3a6c)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-ocean', name: 'Ocean Glass', gradient: 'linear-gradient(135deg, #001f3f, #003366, #004080)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-mint', name: 'Mint Glass', gradient: 'linear-gradient(135deg, #003320, #004d26, #006633)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-gold', name: 'Gold Glass', gradient: 'linear-gradient(135deg, #332600, #4d3800, #664400)', group: 'liquid-glass' },
            { id: 'theme-liquid-glass-silver', name: 'Silver Glass', gradient: 'linear-gradient(135deg, #1a1a1a, #2a2a2a, #3a3a3a)', group: 'liquid-glass' },
        ],
        init(app) {
            this.app = app;
            this.createModalContent();
            // Get saved theme, or use the new default 'theme-liquid-glass-zenith'
            const savedTheme = localStorage.getItem('chronoFocusTheme') || 'theme-liquid-glass-zenith';
            this.set(savedTheme);
        },
        set(themeId) {
            // Clear all theme classes from body
            document.body.className = document.body.className.replace(/\btheme-\S+/g, '');
            
            // Add the new theme class if it's not the default
            if (themeId !== 'default') {
                document.body.classList.add(themeId);
            }
            
            localStorage.setItem('chronoFocusTheme', themeId);
            document.querySelectorAll('.theme-card-swatch').forEach(sw => sw.classList.remove('active'));
            const activeSwatch = document.querySelector(`.theme-card-swatch[data-theme="${themeId}"]`);
            if (activeSwatch) activeSwatch.classList.add('active');
        },
        createModalContent() {
            const themeGroups = this.themes.reduce((acc, theme) => {
                (acc[theme.group] = acc[theme.group] || []).push(theme);
                return acc;
            }, {});

            const groupOrder = ['liquid-glass'];
            let fullHTML = '';

            for (const groupName of groupOrder) {
                if (!themeGroups[groupName]) continue;
                const title = groupName.charAt(0).toUpperCase() + groupName.slice(1).replace('-', ' ');
                const themesHTML = themeGroups[groupName].map(theme => `
                    <div class="theme-card" data-theme="${theme.id}">
                        <div class="theme-card-swatch" data-theme="${theme.id}" style="background: ${theme.gradient || theme.color};"></div>
                        <span>${theme.name}</span>
                    </div>`).join('');
                fullHTML += `<div class="theme-group"><h3>${title}</h3><div class="theme-palette">${themesHTML}</div></div>`;
            }
            this.app.dom.themeModalBody.innerHTML = fullHTML;
        }
    };

    // --- SETTINGS MANAGEMENT ---
    loadSettings() {
        const savedIconStyle = localStorage.getItem('chronoFocusIconStyle') || 'default';
        const savedHaptics = localStorage.getItem('chronoFocusHaptics') !== 'false'; // Default to true
        
        // Set icon style
        document.body.classList.remove('icons-default', 'icons-rounded', 'icons-squared');
        document.body.classList.add(`icons-${savedIconStyle}`);
        
        // Set radio button
        this.dom.iconStyleInputs.forEach(input => {
            input.checked = input.value === savedIconStyle;
        });
        
        // Set haptics
        this.state.hapticsEnabled = savedHaptics;
        this.dom.hapticsInput.checked = savedHaptics;
    }
    
    saveSettings() {
        const selectedIconStyle = document.querySelector('input[name="icon-style"]:checked').value;
        localStorage.setItem('chronoFocusIconStyle', selectedIconStyle);
        
        const hapticsEnabled = this.dom.hapticsInput.checked;
        localStorage.setItem('chronoFocusHaptics', hapticsEnabled);
        this.state.hapticsEnabled = hapticsEnabled;
    }
    
    // --- HAPTIC FEEDBACK ---
    triggerHapticFeedback() {
        if (!this.state.hapticsEnabled) return;
        
        // Add haptic feedback class to body for visual feedback
        document.body.classList.add('haptic-feedback');
        setTimeout(() => {
            document.body.classList.remove('haptic-feedback');
        }, 100);
        
        // Try to use device vibration API if available
        if (navigator.vibrate) {
            navigator.vibrate(10); // 10ms vibration
        }
    }

    // --- TASK MANAGEMENT ---
    getTasks = () => JSON.parse(localStorage.getItem('chronoFocusTasks')) || [];
    saveTasks = (tasks) => localStorage.setItem('chronoFocusTasks', JSON.stringify(tasks));
   
    loadTasks() {
        this.dom.taskList.innerHTML = '';
        const tasks = this.getTasks();
        const tasksForView = this.state.selectedDate
            ? tasks.filter(task => task.date === this.state.selectedDate)
            : tasks.filter(task => !task.date);

        // Sort by completion status, then by priority
        tasksForView.sort((a, b) => {
            if (a.completed !== b.completed) return a.completed - b.completed;
            if (a.priority === 'important' && b.priority !== 'important') return -1;
            if (a.priority !== 'important' && b.priority === 'important') return 1;
            return 0;
        });
       
        const filteredTasks = tasksForView.filter(task => {
            if (this.state.currentFilter === 'active') return !task.completed;
            if (this.state.currentFilter === 'completed') return task.completed;
            return true;
        });
       
        if (filteredTasks.length === 0) {
            const message = this.state.selectedDate ? 'No tasks for this date. Time to plan!' : 'Your mind is clear. Add a task to begin!';
            this.dom.taskList.innerHTML = `<li style="opacity: 1; animation: none; justify-content: center; color: var(--text-secondary); background: transparent; border: 1px dashed var(--border-color); box-shadow: none;">${message}</li>`;
        } else {
            const fragment = document.createDocumentFragment();
            filteredTasks.forEach(task => fragment.appendChild(this.createTaskElement(task)));
            this.dom.taskList.appendChild(fragment);
        }
        this.updateCalendarMarkers();
    }
   
    createTaskElement(task) {
        const li = document.createElement('li');
        li.dataset.id = task.id;
        if (task.completed) li.classList.add('completed');
        if (task.priority === 'important') li.classList.add('priority-important');
        if (task.color && task.color !== 'default') li.style.borderLeftColor = `var(--task-color-${task.color})`;

        const priorityStar = task.priority === 'important' ? `<i class="fa-solid fa-star important-star"></i>` : '';

        li.innerHTML = `
            <div class="task-content">
                <i class="${task.icon} task-icon"></i>
                <span class="task-text">${priorityStar}${task.text}</span>
            </div>
            <div class="task-actions">
                <button class="complete-btn" data-action="toggle" title="Complete"><i class="fa-solid fa-check"></i></button>
                <button class="edit-btn" data-action="edit" title="Edit"><i class="fa-solid fa-pencil"></i></button>
                <button class="delete-btn" data-action="delete" title="Delete"><i class="fa-solid fa-trash"></i></button>
            </div>`;
        return li;
    }

    addTask() {
        const text = this.dom.taskInput.value.trim();
        if (text === '') {
            this.showToast('Please enter a task description!');
            return;
        }
        let tasks = this.getTasks();
        tasks.push({
            id: 'task-' + Date.now(),
            text,
            icon: this.dom.taskIcon.value,
            priority: this.dom.taskPriority.value,
            color: this.dom.taskColor.value,
            completed: false,
            date: this.state.selectedDate
        });
        this.saveTasks(tasks);
        this.loadTasks();
        this.dom.taskInput.value = '';
        this.dom.taskInput.focus();
        this.triggerHapticFeedback();
        this.showToast(`Task added${this.state.selectedDate ? ' for ' + new Date(this.state.selectedDate + 'T00:00:00').toLocaleDateString() : ''}!`);
    }

    deleteTask(taskId, taskElement) {
        if (confirm('Are you sure you want to delete this task?')) {
            taskElement.classList.add('deleting');
            setTimeout(() => {
                this.saveTasks(this.getTasks().filter(t => t.id !== taskId));
                this.loadTasks();
                this.triggerHapticFeedback();
                this.showToast('Task deleted.');
            }, 500);
        }
    }
   
    toggleCompleteTask(taskId) {
        let tasks = this.getTasks();
        const task = tasks.find(t => t.id === taskId);
        if (task) {
            task.completed = !task.completed;
            this.saveTasks(tasks);
            this.loadTasks();
            this.triggerHapticFeedback();
            if (task.completed) this.showToast('Task completed! Great job! 🎉');
        }
    }

    editTask(taskId) {
        let tasks = this.getTasks();
        const task = tasks.find(t => t.id === taskId);
        if (task && !task.completed) {
            const newText = prompt('Enter the new task text:', task.text);
            if (newText && newText.trim() && newText.trim() !== task.text) {
                task.text = newText.trim();
                this.saveTasks(tasks);
                this.loadTasks();
                this.triggerHapticFeedback();
                this.showToast('Task updated!');
            }
        }
    }
   
    // --- CALENDAR ---
    renderDayNames() {
        this.dom.dayNames.innerHTML = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
            .map(day => `<div class="calendar-day-name">${day}</div>`).join('');
    }

    renderCalendar() {
        this.dom.calendarGrid.innerHTML = '';
        const { year, month } = { year: this.state.currentDate.getFullYear(), month: this.state.currentDate.getMonth() };
        this.dom.monthYear.textContent = `${this.state.currentDate.toLocaleString('default', { month: 'long' })} ${year}`;

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const today = new Date();
        const fragment = document.createDocumentFragment();

        for (let i = 0; i < firstDay; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.classList.add('other-month');
            fragment.appendChild(emptyCell);
        }
       
        for (let i = 1; i <= daysInMonth; i++) {
            const dayCell = document.createElement('div');
            dayCell.className = 'calendar-day';
            dayCell.textContent = i;
            const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
            dayCell.dataset.date = dateString;
           
            if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) dayCell.classList.add('today');
            if (dateString === this.state.selectedDate) dayCell.classList.add('selected');
            fragment.appendChild(dayCell);
        }
        this.dom.calendarGrid.appendChild(fragment);
        this.updateCalendarMarkers();
    }
   
    updateCalendarMarkers() {
        const taskDates = new Set(this.getTasks().filter(t => t.date).map(t => t.date));
        document.querySelectorAll('.calendar-day[data-date]').forEach(day => {
            day.classList.toggle('has-task', taskDates.has(day.dataset.date));
        });
    }

    // --- POMODORO TIMER ---
    updatePomodoroDisplay() {
        const minutes = Math.floor(this.state.pomodoro.timeRemaining / 60).toString().padStart(2, '0');
        const seconds = (this.state.pomodoro.timeRemaining % 60).toString().padStart(2, '0');
        const timeString = `${minutes}:${seconds}`;
        this.dom.pomodoroDisplay.textContent = timeString;
        document.title = `${timeString} - Chrono Focus`;
        
        if (!this.circumference) return;
        const totalDuration = this.state.pomodoro.modes[this.state.pomodoro.mode];
        const progress = (totalDuration - this.state.pomodoro.timeRemaining) / totalDuration;
        const offset = this.circumference * (1 - progress);
        this.dom.progressRing.style.strokeDashoffset = offset;
    }

    startPausePomodoro() {
        this.state.pomodoro.isRunning = !this.state.pomodoro.isRunning;
        const icon = this.dom.pomodoroStartPause.querySelector('i');
        icon.className = `fa-solid ${this.state.pomodoro.isRunning ? 'fa-pause' : 'fa-play'}`;
        if (this.state.pomodoro.isRunning) {
            this.dom.pomodoroCircle.classList.add('running');
            this.state.pomodoro.timerId = setInterval(() => this.tickPomodoro(), 1000);
        } else {
            this.dom.pomodoroCircle.classList.remove('running');
            clearInterval(this.state.pomodoro.timerId);
        }
        this.triggerHapticFeedback();
    }
   
    tickPomodoro() {
        if (this.state.pomodoro.timeRemaining > 0) {
            this.state.pomodoro.timeRemaining--;
            this.updatePomodoroDisplay();
        } else {
            clearInterval(this.state.pomodoro.timerId);
            this.state.pomodoro.isRunning = false;
            this.dom.pomodoroCircle.classList.remove('running');
            this.dom.pomodoroStartPause.querySelector('i').className = 'fa-solid fa-play';
            this.finishSound.play();
            this.triggerHapticFeedback();
            const modeName = this.state.pomodoro.mode.replace(/([A-Z])/g, ' $1').toLowerCase();
            this.showToast(`${modeName.charAt(0).toUpperCase() + modeName.slice(1)} session finished!`);
            const nextMode = this.state.pomodoro.mode === 'pomodoro' ? 'shortBreak' : 'pomodoro';
            setTimeout(() => this.switchPomodoroMode(nextMode), 500);
        }
    }

    resetPomodoro = () => {
        clearInterval(this.state.pomodoro.timerId);
        this.state.pomodoro.isRunning = false;
        this.dom.pomodoroCircle.classList.remove('running');
        this.state.pomodoro.timeRemaining = this.state.pomodoro.modes[this.state.pomodoro.mode];
        this.dom.pomodoroStartPause.querySelector('i').className = 'fa-solid fa-play';
        this.updatePomodoroDisplay();
        this.triggerHapticFeedback();
    };

    switchPomodoroMode(newMode) {
        this.state.pomodoro.mode = newMode;
        this.dom.pomodoroModes.querySelectorAll('button').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.mode === newMode);
        });
        this.resetPomodoro();
        this.triggerHapticFeedback();
    }
   
    // --- UI & HELPERS ---
    showToast(message, duration = 3000) {
        this.dom.toast.textContent = message;
        this.dom.toast.classList.add('show');
        setTimeout(() => this.dom.toast.classList.remove('show'), duration);
    }
   
    // --- EVENT LISTENERS ---
    setupEventListeners() {
        this.dom.addTaskBtn.addEventListener('click', () => this.addTask());
        this.dom.taskInput.addEventListener('keypress', e => { if (e.key === 'Enter') this.addTask(); });

        this.dom.taskFilters.addEventListener('click', e => {
            if (e.target.tagName === 'BUTTON') {
                this.dom.taskFilters.querySelector('.active').classList.remove('active');
                e.target.classList.add('active');
                this.state.currentFilter = e.target.dataset.filter;
                this.loadTasks();
                this.triggerHapticFeedback();
            }
        });

        this.dom.taskList.addEventListener('click', e => {
            const targetButton = e.target.closest('button');
            if (!targetButton) return;
           
            const taskElement = e.target.closest('li');
            const taskId = taskElement.dataset.id;
            const action = targetButton.dataset.action;
           
            if (action === 'toggle') this.toggleCompleteTask(taskId);
            if (action === 'edit') this.editTask(taskId);
            if (action === 'delete') this.deleteTask(taskId, taskElement);
        });
       
        this.dom.prevMonthBtn.addEventListener('click', () => { 
            this.state.currentDate.setMonth(this.state.currentDate.getMonth() - 1); 
            this.renderCalendar(); 
            this.triggerHapticFeedback();
        });
        this.dom.nextMonthBtn.addEventListener('click', () => { 
            this.state.currentDate.setMonth(this.state.currentDate.getMonth() + 1); 
            this.renderCalendar(); 
            this.triggerHapticFeedback();
        });
        this.dom.calendarGrid.addEventListener('click', e => {
            const dayCell = e.target.closest('.calendar-day:not(.other-month)');
            if (dayCell) {
                const date = dayCell.dataset.date;
                this.state.selectedDate = this.state.selectedDate === date ? null : date;
                this.renderCalendar();
                this.loadTasks();
                this.triggerHapticFeedback();
            }
        });
           
        this.dom.pomodoroStartPause.addEventListener('click', () => this.startPausePomodoro());
        this.dom.pomodoroReset.addEventListener('click', () => this.resetPomodoro());
        this.dom.pomodoroModes.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON' && e.target.dataset.mode) this.switchPomodoroMode(e.target.dataset.mode);
        });

        this.dom.themeFab.addEventListener('click', () => {
            this.dom.themeModal.classList.add('visible');
            this.triggerHapticFeedback();
        });
        this.dom.themeModal.querySelector('.close-modal-btn').addEventListener('click', () => {
            this.dom.themeModal.classList.remove('visible');
            this.saveSettings();
            this.triggerHapticFeedback();
        });
        this.dom.themeModal.addEventListener('click', e => { 
            if (e.target === this.dom.themeModal) {
                this.dom.themeModal.classList.remove('visible');
                this.saveSettings();
                this.triggerHapticFeedback();
            }
        });
        document.addEventListener('keydown', e => { 
            if (e.key === 'Escape') {
                this.dom.themeModal.classList.remove('visible');
                this.saveSettings();
            }
        });
        this.dom.themeModalBody.addEventListener('click', e => {
            const card = e.target.closest('.theme-card'); 
            if (card) {
                this.ThemeManager.set(card.dataset.theme);
                this.triggerHapticFeedback();
            }
        });
        
        // Icon style change listeners
        this.dom.iconStyleInputs.forEach(input => {
            input.addEventListener('change', () => {
                const style = input.value;
                document.body.classList.remove('icons-default', 'icons-rounded', 'icons-squared');
                document.body.classList.add(`icons-${style}`);
                this.triggerHapticFeedback();
            });
        });
        
        // Haptics toggle listener
        this.dom.hapticsInput.addEventListener('change', () => {
            this.triggerHapticFeedback();
        });
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const app = new ChronoFocusApp();
    window.App = app; // For easy debugging
    app.init();
});
</script>

</body>
</html>
