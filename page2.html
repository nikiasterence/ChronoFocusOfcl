<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyVERSE - Your Cosmic Study Companion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <style>
        :root {
            /* Theme will be dynamically set by JS */
            --primary-glow: #8A2BE2;
            --secondary-glow: #5D3FD3;
            --tertiary-glow: #9370DB;
            --background: #121212;
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --shadow-color: rgba(0, 0, 0, 0.5);
            --card-bg: rgba(30, 30, 46, 0.7);
            --accent: #BB86FC;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(187, 134, 252, 0.8);
        }

        body {
            min-height: 100vh;
            background-color: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            color: var(--text-primary);
            flex-direction: column;
            gap: 20px;
            padding-bottom: 150px;
            transition: background-color 0.8s ease, color 0.8s ease;
            overflow-x: hidden;
        }

        .aurora-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -2; overflow: hidden;
        }

        .aurora-item {
            position: absolute; border-radius: 50%;
            filter: blur(120px); opacity: 0;
            transition: background-color 0.8s ease;
        }

        .aurora-item:nth-child(1) {
            width: 600px; height: 600px;
            background: var(--primary-glow); top: 10%; left: 10%;
            animation: aurora-glow-1 20s infinite alternate ease-in-out;
        }

        .aurora-item:nth-child(2) {
            width: 500px; height: 500px;
            background: var(--secondary-glow); bottom: 5%; right: 5%;
            animation: aurora-glow-2 25s infinite alternate ease-in-out;
        }

        .aurora-item:nth-child(3) {
            width: 400px; height: 400px;
            background: var(--tertiary-glow); top: 50%; left: 50%;
            animation: aurora-glow-3 18s infinite alternate ease-in-out;
        }
        
        .aurora-item:nth-child(4) {
            width: 350px; height: 350px;
            background: var(--primary-glow); top: 25%; right: 20%;
            animation: aurora-glow-2 22s infinite alternate-reverse ease-in-out;
        }

        @keyframes aurora-glow-1 {
            0% { transform: scale(1) translate(0, 0) rotate(0deg); opacity: 0.3; }
            100% { transform: scale(1.6) translate(40px, -40px) rotate(90deg); opacity: 0.5; }
        }
        @keyframes aurora-glow-2 {
            0% { transform: scale(1) translate(0, 0) rotate(0deg); opacity: 0.4; }
            100% { transform: scale(1.4) translate(-30px, 50px) rotate(-90deg); opacity: 0.6; }
        }
        @keyframes aurora-glow-3 {
            0% { transform: scale(1) translate(-50%, -50%) rotate(0deg); opacity: 0.35; }
            100% { transform: scale(1.5) translate(-40%, -60%) rotate(180deg); opacity: 0.55; }
        }

        .app {
            width: 95%; max-width: 600px; background: var(--card-bg);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 24px; padding: 30px; box-shadow: 0 10px 40px var(--shadow-color);
            border: 1px solid var(--glass-border); text-align: center;
            position: relative; z-index: 1;
        }

        h1 {
            font-size: 2.8rem; margin-bottom: 25px; display: flex;
            justify-content: center; align-items: center; gap: 15px;
            font-weight: 700;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.3);
            color: var(--accent);
        }
        
        .tip-container {
            min-height: 150px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; margin: 20px 0; padding: 20px;
            background: rgba(0,0,0,0.2); border-radius: 20px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3); transition: all 0.4s ease;
            border: 1px solid var(--glass-border); position: relative;
        }
        
        #tip { 
            font-size: 1.1rem; line-height: 1.6; 
            text-shadow: 0 2px 8px var(--shadow-color); 
            font-weight: 400; 
        }

        .copy-tip-btn {
            position: absolute; top: 10px; right: 10px;
            background: rgba(255,255,255,0.1); border: none; color: var(--text-primary);
            padding: 8px 10px; border-radius: 8px; cursor: pointer; opacity: 0.5; transition: all 0.3s;
        }
        .tip-container:hover .copy-tip-btn { opacity: 1; }

        .caffeine-counter {
            margin-top: 20px; padding: 15px; background: var(--glass-bg);
            border-radius: 16px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--glass-border);
        }
        .caffeine-display { font-size: 1rem; font-weight: 500; }
        .caffeine-warning { color: #ff6b6b; font-size: 0.8rem; margin-top: 5px; display: none; font-weight: bold; }
        .reset-btn {
            padding: 8px 15px; font-size: 0.8rem; border-radius: 12px;
            background: var(--glass-bg); color: var(--text-secondary);
            border: 1px solid var(--glass-border); cursor: pointer;
            display: flex; align-items: center; gap: 8px;
            transition: all 0.3s ease;
        }
        .reset-btn:hover { background: rgba(255,255,255,0.15); color: var(--text-primary); }
        
        /* Calendar Styles */
        .calendar-container {
            margin-top: 25px;
            background: var(--glass-bg);
            border-radius: 16px;
            padding: 15px;
            border: 1px solid var(--glass-border);
            position: relative;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .calendar-toggle:hover {
            color: var(--accent);
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .calendar-day.header {
            font-weight: 600;
            color: var(--accent);
            cursor: default;
        }
        
        .calendar-day.empty {
            background: transparent;
            cursor: default;
        }
        
        .calendar-day.normal {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .calendar-day.today {
            background: var(--accent);
            color: #121212;
            font-weight: 600;
        }
        
        .calendar-day.has-tip:hover {
            background: rgba(187, 134, 252, 0.3);
        }
        
        .day-tip {
            margin-top: 15px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            font-size: 0.95rem;
            display: none;
        }
        
        /* DOCK STYLES */
        .dock {
            position: fixed; display: flex;
            align-items: center; padding: 12px; background: rgba(18, 18, 30, 0.8);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            box-shadow: 0 8px 32px var(--shadow-color);
            border: 1px solid var(--glass-border); z-index: 100;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        /* Positions */
        .dock.dock-bottom {
            bottom: 20px; left: 50%; border-radius: 24px;
            flex-direction: row; align-items: flex-end;
            transform: translateX(-50%);
        }
        .dock.dock-left {
            left: 15px; top: 50%; border-radius: 24px;
            flex-direction: column;
            transform: translateY(-50%);
        }
        .dock.dock-right {
            right: 15px; top: 50%; border-radius: 24px;
            flex-direction: column;
            transform: translateY(-50%);
        }

        .dock-icon {
            border-radius: 16px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.2s ease-in-out; position: relative;
            color: white; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 1px rgba(255,255,255,0.1);
            text-decoration: none; flex-shrink: 0;
            overflow: hidden;
        }

        .dock-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .dock-icon:hover::before {
            left: 100%;
        }

        /* Dock Size classes */
        .dock.size-small .dock-icon { width: 48px; height: 48px; font-size: 1.1rem; }
        .dock.size-medium .dock-icon { width: 60px; height: 60px; font-size: 1.4rem; }
        .dock.size-large .dock-icon { width: 72px; height: 72px; font-size: 1.7rem; }

        .dock.dock-bottom .dock-icon { margin: 0 6px; }
        .dock.dock-left .dock-icon, .dock.dock-right .dock-icon { margin: 6px 0; }
        
        .dock-icon:hover { 
            transform: translateY(-10px) scale(1.15); 
            box-shadow: 0 8px 24px rgba(0,0,0,0.5), inset 0 1px 1px rgba(255,255,255,0.1); 
        }
        .dock.dock-left .dock-icon:hover { transform: translateX(10px) scale(1.15); }
        .dock.dock-right .dock-icon:hover { transform: translateX(-10px) scale(1.15); }

        .dock-icon-label {
            position: absolute; font-size: 0.75rem;
            color: var(--text-primary); 
            text-shadow: 0 1px 5px rgba(0,0,0,0.7);
            opacity: 0; transition: opacity 0.3s, transform 0.3s;
            white-space: nowrap; font-weight: 500;
            background: rgba(0, 0, 0, 0.7);
            padding: 4px 8px;
            border-radius: 6px;
        }
        .dock-icon:hover .dock-icon-label { opacity: 1; }

        .dock.dock-bottom .dock-icon-label { bottom: -30px; }
        .dock.dock-left .dock-icon-label { left: 115%; top: 50%; transform: translateY(-50%); }
        .dock.dock-right .dock-icon-label { right: 115%; top: 50%; transform: translateY(-50%); }

        /* Dock Icon Gradients - Improved with modern gradients */
        .dock-tip { background: linear-gradient(135deg, #FF9A8B, #FF6A88, #FF99AC); }
        .dock-study { background: linear-gradient(135deg, #FAD961, #F76B1C); }
        .dock-measure { background: linear-gradient(135deg, #42E695, #3BB2B8); }
        .dock-caffeine { background: linear-gradient(135deg, #A172FF, #6B5CE7); }
        .dock-cozynotes { background: linear-gradient(135deg, #FFDB7D, #FFB347); }
        .dock-typing { background: linear-gradient(135deg, #5EE7DF, #B490CA); }
        .dock-puzzle { background: linear-gradient(135deg, #6A11CB, #2575FC); }
        .dock-draw { background: linear-gradient(135deg, #F5576C, #F093FB); }
        .dock-whiteboard { background: linear-gradient(135deg, #4FACFE, #00F2FE); }
        .dock-books { background: linear-gradient(135deg, #C471F5, #FA71CD); }
        .dock-moodly { background: linear-gradient(135deg, #F8B9D6, #E87CC2); }
        .dock-optichain { background: linear-gradient(135deg, #77FFD2, #6297F5); }
        .dock-pomodoro { background: linear-gradient(135deg, #FF6B6B, #FF8E53); }
        .dock-deep-focus { background: linear-gradient(135deg, #6577F6, #855CF8); }
        .dock-focus { background: linear-gradient(135deg, #8338EC, #3A86FF); }
        .dock-motivation { background: linear-gradient(135deg, #FB5607, #FF006E); }
        .dock-task { background: linear-gradient(135deg, #2196F3, #673AB7); }

        /* Focus Submenu Styles */
        .focus-submenu {
            position: absolute;
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 8px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            border: 1px solid var(--glass-border);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            z-index: 101;
        }

        /* BUG FIX START: Responsive Focus Submenu positioning */
        .dock.dock-bottom .focus-submenu {
            bottom: 110%; 
            left: 50%;
            transform: translateX(-50%);
        }
        .dock.dock-bottom .dock-icon.dock-focus:hover .focus-submenu {
            opacity: 1;
            visibility: visible;
            bottom: 120%;
        }

        .dock.dock-left .focus-submenu {
            left: 110%;
            top: 50%;
            transform: translateY(-50%);
        }
        .dock.dock-left .dock-icon.dock-focus:hover .focus-submenu {
            opacity: 1;
            visibility: visible;
            left: 120%;
        }

        .dock.dock-right .focus-submenu {
            right: 110%;
            top: 50%;
            transform: translateY(-50%);
        }
        .dock.dock-right .dock-icon.dock-focus:hover .focus-submenu {
            opacity: 1;
            visibility: visible;
            right: 120%;
        }
        /* BUG FIX END */

        .focus-submenu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 10px;
            color: var(--text-primary);
            text-decoration: none;
            transition: background 0.2s;
            font-size: 0.9rem;
        }
        .focus-submenu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .focus-submenu-item i {
            width: 18px;
            text-align: center;
        }

        /* SETTINGS AND THEME CONTROLS */
        .app-controls {
            position: absolute; top: 15px; right: 20px;
            z-index: 10; display: flex; gap: 10px;
        }
        .control-group { position: relative; }
        .control-icon { 
            font-size: 1.2rem; 
            cursor: pointer; 
            transition: transform 0.3s, color 0.3s; 
            text-shadow: 0 2px 5px rgba(0,0,0,0.3); 
            color: var(--accent);
        }
        .control-group:hover .control-icon { transform: scale(1.1) rotate(15deg); color: var(--secondary-glow); }
        .control-options {
            position: absolute; top: 120%; right: 0;
            background: var(--card-bg); 
            border: 1px solid var(--glass-border);
            border-radius: 12px; padding: 10px;
            display: flex; gap: 8px; opacity: 0;
            visibility: hidden; transform: translateY(10px);
            transition: all 0.3s; backdrop-filter: blur(15px);
            min-width: max-content; 
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            z-index: 10;
        }
        .control-group:hover .control-options { opacity: 1; visibility: visible; transform: translateY(0); }
        .theme-dot {
            width: 24px; height: 24px; border-radius: 50%;
            background: var(--theme-bg, #fff); cursor: pointer;
            border: 2px solid rgba(255,255,255,0.5); transition: transform 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .theme-dot:hover { transform: scale(1.15); }
        .pos-btn, .size-btn { 
            background: rgba(255,255,255,0.1); border: 1px solid transparent;
            color: var(--text-primary); padding: 5px 10px; border-radius: 8px;
            cursor: pointer; transition: all 0.3s; font-size: 0.8rem;
        }
        .pos-btn:hover, .size-btn:hover { background: rgba(255,255,255,0.2); }
        .pos-btn.active, .size-btn.active { 
            background: var(--accent); 
            border-color: rgba(255,255,255,0.5);
            color: #121212;
        }

        /* RESPONSIVE STYLES */
        @media (max-width: 768px) {
            .app {
                padding: 25px;
            }
            h1 {
                font-size: 2.2rem;
            }
            #tip {
                font-size: 1rem;
            }
            .dock.dock-bottom {
                width: 90%;
                overflow-x: auto;
                justify-content: flex-start;
                padding: 10px 15px;
            }
            .dock.dock-left, .dock.dock-right {
                max-height: 80vh;
                overflow-y: auto;
                padding: 15px 10px;
            }
            .calendar-day {
                height: 30px;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
                padding-bottom: 120px;
            }
            .caffeine-counter {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            .dock.size-small .dock-icon { width: 42px; height: 42px; font-size: 1rem; }
            .dock.size-medium .dock-icon { width: 52px; height: 52px; font-size: 1.2rem; }
            .dock.size-large .dock-icon { width: 62px; height: 62px; font-size: 1.4rem; }
            .calendar {
                gap: 3px;
            }
            .calendar-day {
                height: 28px;
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="aurora-container">
        <div class="aurora-item"></div><div class="aurora-item"></div>
        <div class="aurora-item"></div><div class="aurora-item"></div>
    </div>

    <div class="dock dock-bottom size-medium">
        <div class="dock-icon dock-tip" onclick="newTip()"><i class="fas fa-lightbulb"></i><div class="dock-icon-label">New Tip</div></div>
        <a href="page12.html" class="dock-icon dock-motivation"><i class="fas fa-fist-raised"></i><div class="dock-icon-label">Motivation</div></a>
        <a href="page1.html" class="dock-icon dock-task"><i class="fas fa-tasks"></i><div class="dock-icon-label">Tasks</div></a>
        <div class="dock-icon dock-focus">
            <i class="fas fa-bullseye"></i>
            <div class="dock-icon-label">Focus</div>
            <div class="focus-submenu">
                <a href="page13.html" class="focus-submenu-item"><i class="fas fa-hourglass-start"></i> Pomodoro</a>
                <a href="page9.html" class="focus-submenu-item"><i class="fas fa-brain"></i> Deep Focus</a>
            </div>
        </div>
        <div class="dock-icon dock-study" onclick="openStudyWithMe()"><i class="fab fa-youtube"></i><div class="dock-icon-label">Study With Me</div></div>
        <a href="page10.html" class="dock-icon dock-measure"><i class="fas fa-ruler-combined"></i><div class="dock-icon-label">Measure</div></a>
        <div class="dock-icon dock-caffeine" onclick="addCaffeine()"><i class="fas fa-coffee"></i><div class="dock-icon-label">Add Caffeine</div></div>
        <!-- NEW: CozyNotes and Typing Test -->
        <a href="page5.html" class="dock-icon dock-cozynotes"><i class="fas fa-sticky-note"></i><div class="dock-icon-label">CozyNotes</div></a>
        <a href="page6.html" class="dock-icon dock-typing"><i class="fas fa-keyboard"></i><div class="dock-icon-label">Typing Test</div></a>
        <a href="page7.html" class="dock-icon dock-puzzle"><i class="fas fa-puzzle-piece"></i><div class="dock-icon-label">Puzzles</div></a>
        <a href="page4.html" class="dock-icon dock-draw"><i class="fas fa-pen"></i><div class="dock-icon-label">Formula Station</div></a>
        <a href="page8.html" class="dock-icon dock-whiteboard"><i class="fas fa-chalkboard"></i><div class="dock-icon-label">White Board</div></a>
        <a href="https://www.ebanglalibrary.com/" target="_blank" class="dock-icon dock-books"><i class="fas fa-book-open"></i><div class="dock-icon-label">Books</div></a>
        <a href="page11.html" class="dock-icon dock-moodly"><i class="fas fa-smile-beam"></i><div class="dock-icon-label">Moodly</div></a>
        <a href="https://talk.shapes.inc/chat/5b4536bc-ecc0-4996-b0d6-677c5aac0d34" target="_blank" class="dock-icon dock-optichain"><i class="fas fa-robot"></i><div class="dock-icon-label">Optichain AI</div></a>
    </div>

    <div class="app">
        <div class="app-controls">
             <div class="control-group">
                <i class="fas fa-ruler-horizontal control-icon"></i>
                <div class="control-options">
                    <button class="size-btn" data-size="small">S</button>
                    <button class="size-btn active" data-size="medium">M</button>
                    <button class="size-btn" data-size="large">L</button>
                </div>
            </div>
             <div class="control-group">
                <i class="fas fa-cog control-icon"></i>
                <div class="control-options">
                    <button class="pos-btn" data-pos="left">Left</button>
                    <button class="pos-btn active" data-pos="bottom">Bottom</button>
                    <button class="pos-btn" data-pos="right">Right</button>
                </div>
            </div>
            <div class="control-group">
                <i class="fas fa-palette control-icon"></i>
                <div class="control-options">
                    <div class="theme-dot" style="--theme-bg: #121212;" data-theme="cosmic-dark"></div>
                    <div class="theme-dot" style="--theme-bg: #1a1a2e;" data-theme="midnight-blue"></div>
                    <div class="theme-dot" style="--theme-bg: #2d2d39;" data-theme="deep-space"></div>
                    <div class="theme-dot" style="--theme-bg: #0f3b2d;" data-theme="forest-deep"></div>
                    <div class="theme-dot" style="--theme-bg: #2d00f7;" data-theme="synthwave"></div>
                    <!-- NEW COZY COLORS ADDED HERE -->
                    <div class="theme-dot" style="--theme-bg: #4a3f35;" data-theme="cozy-mocha"></div>
                    <div class="theme-dot" style="--theme-bg: #ffeadb;" data-theme="sunset-peach"></div>
                    <div class="theme-dot" style="--theme-bg: #e6e6fa;" data-theme="lavender-dream"></div>
                </div>
            </div>
        </div>

        <h1><i class="fas fa-brain"></i> StudyVERSE</h1>
        <div class="tip-container">
            <button class="copy-tip-btn" onclick="copyTip()"><i class="fas fa-copy"></i></button>
            <p id="tip">Welcome! Click the lightbulb for a study tip.</p>
        </div>
        <div class="caffeine-counter">
            <div>
                <span class="caffeine-display">Caffeine: <span id="caffeine-count">0</span> mg</span>
                <div class="caffeine-warning" id="caffeine-warning">Max recommended: 400mg</div>
            </div>
            <button class="reset-btn" onclick="resetCaffeine()"><i class="fas fa-redo"></i> Reset</button>
        </div>
        
        <!-- NEW: Calendar with Study Tips -->
        <div class="calendar-container">
            <div class="calendar-header">
                <h3>Study Calendar</h3>
                <button class="calendar-toggle" onclick="toggleCalendar()">
                    <i class="fas fa-chevron-up" id="calendar-toggle-icon"></i>
                </button>
            </div>
            <div id="calendar-content">
                <div class="calendar" id="calendar">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
                <div class="day-tip" id="day-tip"></div>
            </div>
        </div>
    </div>

    <script>
        const tips = [ 
            "Break your study time into 25-minute intervals with the Pomodoro Technique.", 
            "Use active recall by testing yourself, not just rereading notes.", 
            "Explain what you've learned to someone else to solidify your understanding.", 
            "Create a dedicated, distraction-free study zone.", 
            "Use flashcards for key terms and concepts.", 
            "Review material consistently, a little bit each day.", 
            "Prioritize sleep; it's crucial for memory consolidation.", 
            "Stay hydrated and eat nutritious brain food.", 
            "Use mind maps to visualize connections between ideas.", 
            "Take short, regular breaks to avoid burnout.",
            "Teach concepts to an imaginary audience to identify knowledge gaps.",
            "Use the Feynman Technique: simplify complex topics as if explaining to a child.",
            "Change study locations occasionally to improve memory retention.",
            "Practice spaced repetition for long-term memorization.",
            "Start with the most challenging material when your mind is freshest.",
            "Use mnemonic devices to remember complex information.",
            "Set specific, achievable goals for each study session.",
            "Connect new information to what you already know.",
            "Take notes by hand to improve information processing.",
            "Use background music without lyrics to enhance focus.",
            "Schedule regular review sessions instead of cramming.",
            "Break large projects into smaller, manageable tasks.",
            "Use the 80/20 rule: focus on the 20% that gives 80% of results.",
            "Test yourself frequently to monitor your progress.",
            "Reward yourself after completing study milestones.",
            "Use different colored pens for different types of information.",
            "Create a study schedule and stick to it consistently.",
            "Find a study partner for accountability and discussion.",
            "Avoid multitasking—focus on one subject at a time.",
            "Use online resources and educational videos for difficult concepts.",
            "Practice problems actively instead of passively reading solutions."
        ];
        
        let caffeineIntake = 0;
        let calendarVisible = true;
        
        const tipElement = document.getElementById("tip");
        const caffeineCountEl = document.getElementById("caffeine-count");
        const caffeineWarningEl = document.getElementById("caffeine-warning");
        const dockElement = document.querySelector(".dock");
        const posButtons = document.querySelectorAll('.pos-btn');
        const sizeButtons = document.querySelectorAll('.size-btn');
        const calendarElement = document.getElementById("calendar");
        const dayTipElement = document.getElementById("day-tip");
        const calendarToggleIcon = document.getElementById("calendar-toggle-icon");

        function playSound(url) { 
            try {
                new Audio(url).play(); 
            } catch (e) {
                console.log("Audio error:", e);
            }
        }
        
        function newTip() {
            playSound('https://www.soundjay.com/buttons/sounds/button-16.mp3');
            tipElement.style.opacity = 0;
            setTimeout(() => {
                let randomIndex = Math.floor(Math.random() * tips.length);
                const newTip = tips[randomIndex];
                tipElement.textContent = newTip;
                localStorage.setItem('currentTip', newTip);
                tipElement.style.opacity = 1;
            }, 300);
        }
        
        function copyTip() { 
            navigator.clipboard.writeText(tipElement.textContent).then(() => { 
                playSound('https://www.soundjay.com/buttons/sounds/button-7.mp3'); 
                alert("Tip copied to clipboard!"); 
            }); 
        }
        
        function openStudyWithMe() { window.open('page3.html', '_blank'); }

        function addCaffeine() {
            caffeineIntake += Math.floor(Math.random() * 81) + 40;
            localStorage.setItem('caffeineIntake', caffeineIntake);
            updateCaffeineDisplay();
        }
        
        function resetCaffeine() {
            caffeineIntake = 0;
            localStorage.setItem('caffeineIntake', caffeineIntake);
            updateCaffeineDisplay();
        }

        function updateCaffeineDisplay() {
            caffeineCountEl.textContent = caffeineIntake;
            caffeineWarningEl.style.display = 'none';
            if (caffeineIntake >= 400) { 
                caffeineWarningEl.style.display = "block"; 
                caffeineWarningEl.textContent = "⚠️ Daily max exceeded!"; 
            } else if (caffeineIntake >= 300) { 
                caffeineWarningEl.style.display = "block"; 
                caffeineWarningEl.textContent = "Max recommended: 400mg"; 
            }
        }
        
        const themes = { 
            "cosmic-dark": { 
                "--primary-glow": "#8A2BE2", "--secondary-glow": "#5D3FD3", "--tertiary-glow": "#9370DB", 
                "--background": "#121212", "--text-primary": "#FFFFFF", "--glass-bg": "rgba(255, 255, 255, 0.08)", 
                "--glass-border": "rgba(255, 255, 255, 0.15)", "--card-bg": "rgba(30, 30, 46, 0.7)", "--accent": "#BB86FC"
            }, 
            "midnight-blue": { 
                "--primary-glow": "#0f3460", "--secondary-glow": "#533483", "--tertiary-glow": "#1e90ff", 
                "--background": "#1a1a2e", "--text-primary": "#e0e0e0", "--glass-bg": "rgba(0, 0, 0, 0.2)", 
                "--glass-border": "rgba(255, 255, 255, 0.15)", "--card-bg": "rgba(39, 39, 62, 0.7)", "--accent": "#4cc9f0"
            }, 
            "deep-space": { 
                "--primary-glow": "#2d2d39", "--secondary-glow": "#4a4a5a", "--tertiary-glow": "#6d6d8a", 
                "--background": "#2d2d39", "--text-primary": "#f0f0f0", "--glass-bg": "rgba(0, 0, 0, 0.2)", 
                "--glass-border": "rgba(255, 255, 255, 0.15)", "--card-bg": "rgba(60, 60, 80, 0.7)", "--accent": "#a172ff"
            }, 
            "forest-deep": { 
                "--primary-glow": "#0f3b2d", "--secondary-glow": "#1b5e45", "--tertiary-glow": "#2e8b56", 
                "--background": "#0f3b2d", "--text-primary": "#e0f2e9", "--glass-bg": "rgba(0, 0, 0, 0.2)", 
                "--glass-border": "rgba(255, 255, 255, 0.15)", "--card-bg": "rgba(40, 80, 60, 0.7)", "--accent": "#42e695"
            }, 
            "synthwave": { 
                "--primary-glow": "#f20089", "--secondary-glow": "#00f5d4", "--tertiary-glow": "#e500a4", 
                "--background": "#2d00f7", "--text-primary": "#ffffff", "--glass-bg": "rgba(0, 0, 0, 0.2)", 
                "--glass-border": "rgba(255, 255, 255, 0.15)", "--card-bg": "rgba(80, 0, 200, 0.7)", "--accent": "#ff00ff"
            },
            // NEW COZY THEMES ADDED HERE
            "cozy-mocha": {
                "--primary-glow": "#c89f7f", "--secondary-glow": "#7c6a59", "--tertiary-glow": "#a5886e",
                "--background": "#4a3f35", "--text-primary": "#f5f5dc", "--glass-bg": "rgba(245, 245, 220, 0.1)",
                "--glass-border": "rgba(245, 245, 220, 0.2)", "--card-bg": "rgba(87, 72, 60, 0.7)", "--accent": "#e0cda9"
            },
            "sunset-peach": {
                "--primary-glow": "#ffc0cb", "--secondary-glow": "#ffa07a", "--tertiary-glow": "#ffdab9",
                "--background": "#ffeadb", "--text-primary": "#5c4033", "--glass-bg": "rgba(92, 64, 51, 0.08)",
                "--glass-border": "rgba(92, 64, 51, 0.15)", "--card-bg": "rgba(255, 237, 224, 0.7)", "--accent": "#ff6b6b"
            },
            "lavender-dream": {
                "--primary-glow": "#dda0dd", "--secondary-glow": "#d8bfd8", "--tertiary-glow": "#cbc3e3",
                "--background": "#e6e6fa", "--text-primary": "#483d8b", "--glass-bg": "rgba(72, 61, 139, 0.08)",
                "--glass-border": "rgba(72, 61, 139, 0.15)", "--card-bg": "rgba(238, 221, 255, 0.7)", "--accent": "#9370db"
            }
        };
        
        function setTheme(themeName) {
            const selectedTheme = themes[themeName]; 
            if (!selectedTheme) return;
            
            for (const [key, value] of Object.entries(selectedTheme)) { 
                document.documentElement.style.setProperty(key, value); 
            }
            localStorage.setItem('studyVerseTheme', themeName);
        }
        
        document.querySelectorAll(".theme-dot").forEach(dot => { 
            dot.addEventListener('click', () => setTheme(dot.dataset.theme)); 
        });

        function setDockPosition(position) {
            const validPositions = ['left', 'bottom', 'right'];
            if (!validPositions.includes(position)) position = 'bottom'; 

            dockElement.classList.remove('dock-left', 'dock-bottom', 'dock-right');
            dockElement.classList.add(`dock-${position}`);

            posButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.pos === position));
            localStorage.setItem('studyVerseDockPosition', position);
        }

        posButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                setDockPosition(btn.dataset.pos);
            });
        });

        function setDockSize(size) {
            const validSizes = ['small', 'medium', 'large'];
            if (!validSizes.includes(size)) size = 'medium'; 

            dockElement.classList.remove('size-small', 'size-medium', 'size-large');
            dockElement.classList.add(`size-${size}`);

            sizeButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.size === size));
            localStorage.setItem('studyVerseDockSize', size);
        }

        sizeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                setDockSize(btn.dataset.size);
            });
        });
        
        function generateCalendar() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            
            // Get first day of month and number of days in month
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Calendar headers
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            let calendarHTML = '';
            
            // Add day headers
            dayNames.forEach(day => {
                calendarHTML += `<div class="calendar-day header">${day}</div>`;
            });
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                calendarHTML += `<div class="calendar-day empty"></div>`;
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const isToday = now.getDate() === day && now.getMonth() === month && now.getFullYear() === year;
                const hasTip = Math.random() > 0.7; // 30% chance a day has a tip
                
                calendarHTML += `<div class="calendar-day ${isToday ? 'today' : 'normal'} ${hasTip ? 'has-tip' : ''}" 
                    data-day="${day}" data-has-tip="${hasTip}">${day}</div>`;
            }
            
            calendarElement.innerHTML = calendarHTML;
            
            // Add event listeners to days with tips
            document.querySelectorAll('.calendar-day.has-tip').forEach(day => {
                day.addEventListener('click', () => {
                    const dayNum = day.getAttribute('data-day');
                    showDayTip(dayNum);
                });
            });
        }
        
        function showDayTip(day) {
            const randomTipIndex = Math.floor(Math.random() * tips.length);
            dayTipElement.textContent = `Tip for day ${day}: ${tips[randomTipIndex]}`;
            dayTipElement.style.display = 'block';
        }
        
        function toggleCalendar() {
            const calendarContent = document.getElementById('calendar-content');
            calendarVisible = !calendarVisible;
            
            if (calendarVisible) {
                calendarContent.style.display = 'block';
                calendarToggleIcon.className = 'fas fa-chevron-up';
            } else {
                calendarContent.style.display = 'none';
                calendarToggleIcon.className = 'fas fa-chevron-down';
            }
        }

        function loadState() {
            const savedCaffeine = localStorage.getItem('caffeineIntake');
            if (savedCaffeine !== null) { 
                caffeineIntake = parseInt(savedCaffeine, 10); 
                updateCaffeineDisplay(); 
            }

            const savedTip = localStorage.getItem('currentTip');
            if (savedTip) { 
                tipElement.textContent = savedTip; 
            }

            const savedTheme = localStorage.getItem('studyVerseTheme');
            setTheme(savedTheme && themes[savedTheme] ? savedTheme : 'cosmic-dark');

            const savedDockPos = localStorage.getItem('studyVerseDockPosition');
            setDockPosition(savedDockPos || 'bottom');

            const savedDockSize = localStorage.getItem('studyVerseDockSize');
            setDockSize(savedDockSize || 'medium');
            
            // Generate the calendar
            generateCalendar();
        }
        
        document.addEventListener("DOMContentLoaded", () => {
            loadState();
            const app = document.querySelector(".app");
            app.style.opacity = 0; 
            app.style.transform = "translateY(20px)";
            
            setTimeout(() => {
                app.style.transition = "opacity 0.5s, transform 0.5s";
                app.style.opacity = 1; 
                app.style.transform = "translateY(0)";
            }, 100);
        });
    </script>
</body>
</html></html>
